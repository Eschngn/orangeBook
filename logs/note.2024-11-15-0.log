2024-11-15 00:03:53.748 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:03:53.862 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:03:54.528 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:03:54.544 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:03:54.545 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 00:03:55.474 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 00:03:55.478 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 00:03:55.509 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2024-11-15 00:03:55.823 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 00:03:55.859 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:55.861 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:55.863 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.146 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.262 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.265 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.270 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.271 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x000002b9c351ba00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.274 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.283 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.284 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:03:56.729 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 00:03:56.745 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 00:03:56.745 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 00:03:56.919 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 00:03:56.919 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2354 ms
2024-11-15 00:03:57.066 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 00:03:57.487 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 00:03:57.866 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 00:03:58.626 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:03:58.627 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 00:03:58.940 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:03:59.022 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:03:59.052 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:03:59.631 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:03:59.631 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 00:03:59.739 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:03:59.739 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 00:04:01.081 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 00:04:01.092 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:04:01.093 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 00:04:01.094 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 00:04:01.095 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 00:04:01.133 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 00:04:01.134 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 00:04:01.135 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 00:04:01.140 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 00:04:01.141 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 00:04:01.144 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 00:04:01.156 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d
2024-11-15 00:04:01.185 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 00:04:01.186 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 00:04:01.186 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 00:04:01.189 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 00:04:01.222 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 00:04:02.520 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731600242449_192.168.247.1_61416
2024-11-15 00:04:02.521 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Notify connected event to listeners.
2024-11-15 00:04:02.521 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 00:04:02.521 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 00:04:02.521 [main] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x000002b9c39dba90
2024-11-15 00:04:02.523 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 00:04:02.538 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 00:04:02.771 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 10.015 seconds (process running for 10.85)
2024-11-15 00:05:35.319 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 00:05:35.319 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 00:05:35.320 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 00:05:35.327 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 00:05:35.328 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 00:05:35.416 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1849473040467886111}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:05:35.690 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==>  Preparing: select count(1) from t_note where id = ? and status = 1
2024-11-15 00:05:35.860 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==> Parameters: 1849473040467886111(Long)
2024-11-15 00:05:35.881 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - <==      Total: 1
2024-11-15 00:05:35.887 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:05:35.889 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1849473040467886111(Long)
2024-11-15 00:05:35.896 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:05:35.908 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 00:05:35.908 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 00:05:35.940 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:05:35.942 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 111(Long), 1849473040467886111(Long)
2024-11-15 00:05:35.945 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 00:05:35.948 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 00:05:35.949 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 111(Long)
2024-11-15 00:05:35.951 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 00:05:35.967 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==>  Preparing: select note_id, create_time from t_note_like where user_id = ? and status = 1 order by create_time desc limit ?
2024-11-15 00:05:35.970 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==> Parameters: 111(Long), 100(Integer)
2024-11-15 00:05:35.973 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 00:05:35.973 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - <==      Total: 1
2024-11-15 00:05:35.973 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 00:05:35.990 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:05:35.990 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:05:35.996 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 580ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:05:36.002 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:05:36.002 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:05:36.010 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 00:05:36.071 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B481E289A0000, offsetMsgId=C0A8F78A00002A9F00000000000020BD, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=3]
2024-11-15 00:05:36.101 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1849473040467886111,"type":1,"createTime":"2024-11-15 00:05:35"}, tags: Like
2024-11-15 00:05:36.105 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 00:05:36.211 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 111(Long), 1849473040467886111(Long), 2024-11-15T00:05:35(LocalDateTime), 1(Integer), 2024-11-15T00:05:35(LocalDateTime), 1(Integer)
2024-11-15 00:05:36.236 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 00:05:36.247 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B481E29730001, offsetMsgId=C0A8F78A00002A9F000000000000222D, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=3], queueOffset=1]
2024-11-15 00:05:36.566 [nacos-grpc-client-executor-192.168.247.138-32] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Receive server push request, request = NotifySubscriberRequest, requestId = 1685
2024-11-15 00:05:36.567 [nacos-grpc-client-executor-192.168.247.138-32] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Ack server push request, request = NotifySubscriberRequest, requestId = 1685
2024-11-15 00:05:36.570 [nacos-grpc-client-executor-192.168.247.138-33] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Receive server push request, request = NotifySubscriberRequest, requestId = 1686
2024-11-15 00:05:36.570 [nacos-grpc-client-executor-192.168.247.138-33] INFO  com.alibaba.nacos.common.remote.client - [9ea3f269-fbb4-46a5-9bd4-4e2505b98a1d] Ack server push request, request = NotifySubscriberRequest, requestId = 1686
2024-11-15 00:06:53.125 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 00:06:53.126 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 00:06:53.129 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:06:53.131 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==>  Preparing: select count(1) from t_note where id = ? and status = 1
2024-11-15 00:06:53.132 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:06:53.134 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - <==      Total: 1
2024-11-15 00:06:53.135 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:06:53.136 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:06:53.136 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:06:53.137 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 00:06:53.138 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:06:53.139 [NoteExecutor-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:06:53.139 [NoteExecutor-6] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:06:53.140 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 00:06:53.141 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 00:06:53.141 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 00:06:53.143 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 00:06:53.150 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==>  Preparing: select note_id, create_time from t_note_like where user_id = ? and status = 1 order by create_time desc limit ?
2024-11-15 00:06:53.150 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==> Parameters: 110(Long), 100(Integer)
2024-11-15 00:06:53.152 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - <==      Total: 1
2024-11-15 00:06:53.158 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 29ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:06:53.159 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 00:06:53.163 [NettyClientPublicExecutor_3] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B481F55E60002, offsetMsgId=C0A8F78A00002A9F00000000000024C5, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=5]
2024-11-15 00:06:53.163 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 00:06:53"}, tags: Like
2024-11-15 00:06:53.164 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 00:06:53.164 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T00:06:53(LocalDateTime), 1(Integer), 2024-11-15T00:06:53(LocalDateTime), 1(Integer)
2024-11-15 00:06:53.170 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 00:06:53.174 [NettyClientPublicExecutor_4] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B481F55F30003, offsetMsgId=C0A8F78A00002A9F0000000000002635, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=2]
2024-11-15 00:07:57.794 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 00:07:57.795 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 00:07:57.799 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: unlikeNote ===================================
2024-11-15 00:07:57.801 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==>  Preparing: select count(1) from t_note where id = ? and status = 1
2024-11-15 00:07:57.802 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:07:57.805 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - <==      Total: 1
2024-11-15 00:07:57.809 [NoteExecutor-7] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:07:57.809 [NoteExecutor-7] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:07:57.812 [NoteExecutor-7] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:07:57.813 [NoteExecutor-8] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:07:57.813 [NoteExecutor-9] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:07:57.814 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消点赞笔记], 耗时: 14ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:07:57.814 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 00:07:57.818 [NettyClientPublicExecutor_5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B482052760004, offsetMsgId=C0A8F78A00002A9F00000000000028CD, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=6]
2024-11-15 00:07:57.819 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":0,"createTime":"2024-11-15 00:07:57"}, tags: Unlike
2024-11-15 00:07:57.819 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==>  Preparing: update t_note_like set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 00:07:57.822 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T00:07:57(LocalDateTime), 110(Long), 1846789498420068425(Long)
2024-11-15 00:07:57.828 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - <==    Updates: 1
2024-11-15 00:07:57.832 [NettyClientPublicExecutor_6] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B482052860005, offsetMsgId=C0A8F78A00002A9F0000000000002A3F, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=3]
2024-11-15 00:08:59.848 [http-nio-8086-exec-10] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 00:08:59.848 [http-nio-8086-exec-10] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 00:08:59.849 [http-nio-8086-exec-10] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: unlikeNote ===================================
2024-11-15 00:08:59.851 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==>  Preparing: select count(1) from t_note where id = ? and status = 1
2024-11-15 00:08:59.852 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:08:59.854 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - <==      Total: 1
2024-11-15 00:08:59.856 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:08:59.857 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:08:59.858 [http-nio-8086-exec-10] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消点赞笔记], 耗时: 9ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:08:59.859 [http-nio-8086-exec-10] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 00:08:59.859 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:08:59.860 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 00:08:59.861 [NettyClientPublicExecutor_7] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B482144D20006, offsetMsgId=C0A8F78A00002A9F0000000000002CD8, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=4]
2024-11-15 00:08:59.860 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 00:08:59.862 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1846789498420068425,"type":0,"createTime":"2024-11-15 00:08:59"}, tags: Unlike
2024-11-15 00:08:59.863 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==>  Preparing: update t_note_like set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 00:08:59.863 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T00:08:59(LocalDateTime), 111(Long), 1846789498420068425(Long)
2024-11-15 00:08:59.868 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - <==    Updates: 1
2024-11-15 00:08:59.872 [NettyClientPublicExecutor_8] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B482144DD0007, offsetMsgId=C0A8F78A00002A9F0000000000002E4A, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=0]
2024-11-15 00:09:31.296 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 00:09:31.296 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 00:09:31.298 [http-nio-8086-exec-8] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:09:31.299 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==>  Preparing: select count(1) from t_note where id = ? and status = 1
2024-11-15 00:09:31.300 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:09:31.301 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - <==      Total: 1
2024-11-15 00:09:31.303 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:09:31.304 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:09:31.306 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:09:31.307 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:09:31.307 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==> Parameters: 111(Long), 1846789498420068425(Long)
2024-11-15 00:09:31.309 [NoteExecutor-6] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:09:31.309 [NoteExecutor-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:09:31.310 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - <==      Total: 1
2024-11-15 00:09:31.315 [http-nio-8086-exec-8] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 17ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:09:31.316 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 00:09:31.318 [NettyClientPublicExecutor_9] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B4821BFB30008, offsetMsgId=C0A8F78A00002A9F00000000000030E3, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=5]
2024-11-15 00:09:31.320 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 00:09:31"}, tags: Like
2024-11-15 00:09:31.321 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 00:09:31.321 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 111(Long), 1846789498420068425(Long), 2024-11-15T00:09:31(LocalDateTime), 1(Integer), 2024-11-15T00:09:31(LocalDateTime), 1(Integer)
2024-11-15 00:09:31.328 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 00:09:31.331 [NettyClientPublicExecutor_10] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B4821BFC00009, offsetMsgId=C0A8F78A00002A9F0000000000003253, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=2], queueOffset=2]
2024-11-15 00:15:00.685 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 00:15:00.686 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 00:15:00.693 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1849473040467886111}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: collectNote ===================================
2024-11-15 00:15:00.695 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==>  Preparing: select count(1) from t_note where id = ? and status = 1
2024-11-15 00:15:00.696 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - ==> Parameters: 1849473040467886111(Long)
2024-11-15 00:15:00.697 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCountByNoteId - <==      Total: 1
2024-11-15 00:15:00.699 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:15:00.699 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1849473040467886111(Long)
2024-11-15 00:15:00.701 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_collection where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:15:00.701 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:15:00.702 [NoteExecutor-9] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:15:00.703 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 111(Long), 1849473040467886111(Long)
2024-11-15 00:15:00.702 [NoteExecutor-8] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:15:00.707 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 00:15:00.707 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectByUserId - ==>  Preparing: select note_id from t_note_collection where user_id = ? and status = 1
2024-11-15 00:15:00.708 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectByUserId - ==> Parameters: 111(Long)
2024-11-15 00:15:00.710 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectByUserId - <==      Total: 1
2024-11-15 00:15:00.719 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCollectedByUserIdAndLimit - ==>  Preparing: select note_id, create_time from t_note_collection where user_id = ? and status = 1 order by create_time desc limit ?
2024-11-15 00:15:00.720 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCollectedByUserIdAndLimit - ==> Parameters: 111(Long), 300(Integer)
2024-11-15 00:15:00.723 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCollectedByUserIdAndLimit - <==      Total: 1
2024-11-15 00:15:00.732 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [收藏笔记], 耗时: 40ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:15:00.733 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 00:15:00.739 [NettyClientPublicExecutor_11] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B4826C67E000A, offsetMsgId=C0A8F78A00002A9F00000000000034EB, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=3]
2024-11-15 00:15:00.741 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1849473040467886111,"type":1,"createTime":"2024-11-15 00:15:00"}, tags: Collect
2024-11-15 00:15:00.742 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_collection(user_id,note_id,create_time,status) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE create_time=?,status=?;
2024-11-15 00:15:00.743 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==> Parameters: 111(Long), 1849473040467886111(Long), 2024-11-15T00:15(LocalDateTime), 1(Integer), 2024-11-15T00:15(LocalDateTime), 1(Integer)
2024-11-15 00:15:00.750 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - <==    Updates: 2
2024-11-15 00:15:00.761 [NettyClientPublicExecutor_12] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000100B863947C6B4826C693000B, offsetMsgId=C0A8F78A00002A9F0000000000003664, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=3], queueOffset=0]
2024-11-15 00:42:46.249 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 00:42:46.249 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 00:42:46.250 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 00:42:46.251 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 00:42:46.274 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:42:46.276 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:42:46.282 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:42:46.283 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:42:46.295 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:42:46.295 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:42:46.382 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 00:42:46.382 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 00:42:46.386 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 00:42:46.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 00:42:46.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 00:42:46.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 00:42:46.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1fce8c97[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 00:42:46.387 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731600242449_192.168.247.1_61416
2024-11-15 00:42:46.393 [nacos-grpc-client-executor-192.168.247.138-502] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731600242449_192.168.247.1_61416]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 00:42:46.394 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@532912da[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 503]
2024-11-15 00:42:46.394 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@6e83b436[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 774]
2024-11-15 00:42:46.394 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 00:42:46.394 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 00:42:46.394 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 00:42:46.396 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:42:46.396 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:42:46.517 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:42:46.522 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:42:46.522 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:42:46.523 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 00:42:46.525 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 00:42:53.045 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:42:53.123 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:42:53.753 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:42:53.769 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:42:53.770 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 00:42:54.631 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 00:42:54.635 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 00:42:54.665 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2024-11-15 00:42:55.018 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 00:42:55.076 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.080 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.082 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.387 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.468 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.470 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.475 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.477 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x0000012f4350c530] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.479 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.487 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.488 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:42:55.939 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 00:42:55.960 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 00:42:55.960 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 00:42:56.152 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 00:42:56.153 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2358 ms
2024-11-15 00:42:56.293 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 00:42:56.714 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 00:42:57.014 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 00:42:57.524 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:42:57.525 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 00:42:57.684 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:42:57.739 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:42:57.762 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:42:58.154 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:42:58.155 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 00:42:58.227 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:42:58.227 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 00:42:59.395 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 00:42:59.405 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:42:59.405 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 00:42:59.406 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 00:42:59.407 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 00:42:59.445 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 00:42:59.445 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 00:42:59.447 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 00:42:59.453 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 00:42:59.453 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 00:42:59.458 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 00:42:59.479 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of c14c7e7b-7d35-421c-a65c-bd839765d95b
2024-11-15 00:42:59.511 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 00:42:59.512 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 00:42:59.512 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 00:42:59.515 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 00:42:59.553 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 00:43:00.806 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731602580758_192.168.247.1_62515
2024-11-15 00:43:00.807 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Notify connected event to listeners.
2024-11-15 00:43:00.807 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 00:43:00.807 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 00:43:00.808 [main] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x0000012f439ded50
2024-11-15 00:43:00.809 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 00:43:00.823 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 00:43:01.083 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 8.961 seconds (process running for 9.686)
2024-11-15 00:44:12.967 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 00:44:12.967 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 00:44:12.969 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 00:44:12.976 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 00:44:12.976 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 00:44:13.064 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:44:13.348 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 00:44:13.524 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:44:13.544 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 00:44:13.549 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:44:13.550 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:44:13.557 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:44:13.567 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:44:13.567 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:44:13.597 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:44:13.601 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 00:44:13.604 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - <==      Total: 1
2024-11-15 00:44:13.620 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 556ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:44:13.634 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 00:44:13.634 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 00:44:13.636 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 00:44:13.649 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:44:13.649 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:44:13.654 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000111D463947C6B484185CD0000, offsetMsgId=C0A8F78A00002A9F0000000000003902, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=7]
2024-11-15 00:44:13.657 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 00:44:13","noteCreatorId":109}, tags: Like
2024-11-15 00:44:13.661 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:44:13.661 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 00:44:13.661 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 00:44:13.758 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T00:44:13(LocalDateTime), 1(Integer), 2024-11-15T00:44:13(LocalDateTime), 1(Integer)
2024-11-15 00:44:13.768 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 00:44:13.774 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000111D463947C6B4841864C0001, offsetMsgId=C0A8F78A00002A9F0000000000003A86, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=4]
2024-11-15 00:44:14.175 [nacos-grpc-client-executor-192.168.247.138-30] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Receive server push request, request = NotifySubscriberRequest, requestId = 1972
2024-11-15 00:44:14.175 [nacos-grpc-client-executor-192.168.247.138-30] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Ack server push request, request = NotifySubscriberRequest, requestId = 1972
2024-11-15 00:44:14.178 [nacos-grpc-client-executor-192.168.247.138-31] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Receive server push request, request = NotifySubscriberRequest, requestId = 1973
2024-11-15 00:44:14.179 [nacos-grpc-client-executor-192.168.247.138-31] INFO  com.alibaba.nacos.common.remote.client - [c14c7e7b-7d35-421c-a65c-bd839765d95b] Ack server push request, request = NotifySubscriberRequest, requestId = 1973
2024-11-15 00:53:14.493 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 00:53:14.493 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 00:53:14.499 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:53:14.502 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 00:53:14.503 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:53:14.505 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 00:53:14.507 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:53:14.508 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:53:14.511 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:53:14.513 [NoteExecutor-6] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:53:14.513 [NoteExecutor-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:53:14.515 [http-nio-8086-exec-3] WARN  c.s.o.note.biz.exception.GlobalExceptionHandler - /note/like request fail, errorCode: NOTE-20008, errorMessage: 您已经点赞过该笔记
2024-11-15 00:53:14.517 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 00:54:13.910 [http-nio-8086-exec-4] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 00:54:13.911 [http-nio-8086-exec-4] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 00:54:13.912 [http-nio-8086-exec-4] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:54:13.913 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 00:54:13.914 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:54:13.916 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 00:54:13.918 [NoteExecutor-7] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:54:13.919 [NoteExecutor-7] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:54:13.920 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:54:13.920 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 00:54:13.921 [NoteExecutor-7] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:54:13.922 [NoteExecutor-9] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:54:13.922 [NoteExecutor-8] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:54:13.927 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 00:54:13.931 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 00:54:13.931 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 00:54:13.933 [http-nio-8086-exec-4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 00:54:13.948 [http-nio-8086-exec-4] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 36ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:54:13.949 [http-nio-8086-exec-4] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 00:54:13.952 [NettyClientPublicExecutor_3] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000111D463947C6B484AAEBC0002, offsetMsgId=C0A8F78A00002A9F0000000000003D54, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=8]
2024-11-15 00:54:13.953 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 00:54:13","noteCreatorId":109}, tags: Like
2024-11-15 00:54:13.953 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 00:54:13.954 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T00:54:13(LocalDateTime), 1(Integer), 2024-11-15T00:54:13(LocalDateTime), 1(Integer)
2024-11-15 00:54:13.960 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 00:54:13.963 [NettyClientPublicExecutor_4] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000111D463947C6B484AAEC90003, offsetMsgId=C0A8F78A00002A9F0000000000003ED8, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=5]
2024-11-15 00:56:24.425 [http-nio-8086-exec-6] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 00:56:24.426 [http-nio-8086-exec-6] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 00:56:24.427 [http-nio-8086-exec-6] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 00:56:24.429 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 00:56:24.430 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:56:24.437 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 00:56:24.439 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 00:56:24.440 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 00:56:24.440 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 00:56:24.441 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 00:56:24.443 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 00:56:24.443 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 00:56:24.443 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 00:56:24.444 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 00:56:24.444 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:56:24.444 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 00:56:24.446 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 00:56:24.454 [http-nio-8086-exec-6] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 27ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 00:56:24.455 [http-nio-8086-exec-6] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 00:56:24.456 [NettyClientPublicExecutor_5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000111D463947C6B484CAC860004, offsetMsgId=C0A8F78A00002A9F00000000000041A6, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=9]
2024-11-15 00:56:24.457 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 00:56:24","noteCreatorId":109}, tags: Like
2024-11-15 00:56:24.458 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 00:56:24.459 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T00:56:24(LocalDateTime), 1(Integer), 2024-11-15T00:56:24(LocalDateTime), 1(Integer)
2024-11-15 00:56:24.464 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 00:56:24.468 [NettyClientPublicExecutor_6] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000111D463947C6B484CAC910005, offsetMsgId=C0A8F78A00002A9F000000000000432A, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=2], queueOffset=3]
2024-11-15 00:58:37.206 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 00:58:37.206 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 00:58:37.206 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 00:58:37.207 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 00:58:37.224 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:58:37.224 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:58:37.234 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:58:37.235 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:58:37.400 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:58:37.460 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 00:58:37.461 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 00:58:37.468 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 00:58:37.468 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 00:58:37.468 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 00:58:37.469 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 00:58:37.469 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 00:58:37.469 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 00:58:37.469 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 00:58:37.469 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@3283370[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 00:58:37.470 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731602580758_192.168.247.1_62515
2024-11-15 00:58:37.474 [nacos-grpc-client-executor-192.168.247.138-213] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731602580758_192.168.247.1_62515]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 00:58:37.478 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5ce96b06[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 214]
2024-11-15 00:58:37.478 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1b0d50bc[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 312]
2024-11-15 00:58:37.479 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 00:58:37.479 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 00:58:37.479 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 00:58:37.481 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:58:37.481 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:58:37.502 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:58:37.605 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:58:37.609 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 00:58:37.609 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 00:58:37.610 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 00:58:37.614 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 00:58:40.916 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:58:40.984 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:58:41.545 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:58:41.559 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:58:41.559 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 00:58:42.210 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 00:58:42.213 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 00:58:42.237 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2024-11-15 00:58:42.472 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 00:58:42.501 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.503 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.504 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.729 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.791 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.793 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.797 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.797 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x0000023d8151aa58] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.799 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.806 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:42.806 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 00:58:43.286 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 00:58:43.298 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 00:58:43.298 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 00:58:43.414 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 00:58:43.414 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1838 ms
2024-11-15 00:58:43.505 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 00:58:43.811 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 00:58:44.060 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 00:58:44.542 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:58:44.542 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 00:58:44.688 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:58:44.734 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:58:44.752 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 00:58:45.085 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:58:45.085 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 00:58:45.148 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 00:58:45.148 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 00:58:46.130 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 00:58:46.136 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 00:58:46.136 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 00:58:46.137 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 00:58:46.137 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 00:58:46.165 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 00:58:46.165 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 00:58:46.166 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 00:58:46.174 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 00:58:46.174 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 00:58:46.177 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 00:58:46.187 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 46f547ad-3539-4bb8-a112-fa80db3151d8
2024-11-15 00:58:46.210 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 00:58:46.210 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 00:58:46.211 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 00:58:46.213 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 00:58:46.240 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 00:58:47.244 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731603527211_192.168.247.1_62895
2024-11-15 00:58:47.245 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Notify connected event to listeners.
2024-11-15 00:58:47.245 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 00:58:47.246 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 00:58:47.246 [main] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x0000023d819dabc8
2024-11-15 00:58:47.248 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 00:58:47.262 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 00:58:47.459 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.393 seconds (process running for 8.193)
2024-11-15 01:08:20.949 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 01:08:20.949 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 01:08:20.951 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2024-11-15 01:08:20.961 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 01:08:20.961 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 01:08:21.068 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 01:08:21.399 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 01:08:21.596 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 01:08:21.625 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 01:08:21.630 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 01:08:21.632 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 01:08:21.638 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 01:08:21.651 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 01:08:21.651 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 01:08:21.691 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 01:08:21.696 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 01:08:21.701 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 01:08:21.704 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 01:08:21.705 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 01:08:21.707 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 01:08:21.730 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 01:08:21.730 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 01:08:21.739 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 671ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 01:08:21.747 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 01:08:21.747 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 01:08:21.756 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 01:08:21.761 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 01:08:21.761 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 01:08:21.773 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015C4C63947C6B48579E840000, offsetMsgId=C0A8F78A00002A9F00000000000045F8, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=10]
2024-11-15 01:08:21.777 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 01:08:21","noteCreatorId":109}, tags: Like
2024-11-15 01:08:21.783 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 01:08:21.933 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T01:08:21(LocalDateTime), 1(Integer), 2024-11-15T01:08:21(LocalDateTime), 1(Integer)
2024-11-15 01:08:21.942 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 01:08:21.950 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015C4C63947C6B48579F3A0001, offsetMsgId=C0A8F78A00002A9F000000000000477C, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=2], queueOffset=4]
2024-11-15 01:08:22.299 [nacos-grpc-client-executor-192.168.247.138-139] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Receive server push request, request = NotifySubscriberRequest, requestId = 1976
2024-11-15 01:08:22.300 [nacos-grpc-client-executor-192.168.247.138-139] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Ack server push request, request = NotifySubscriberRequest, requestId = 1976
2024-11-15 01:08:22.303 [nacos-grpc-client-executor-192.168.247.138-140] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Receive server push request, request = NotifySubscriberRequest, requestId = 1977
2024-11-15 01:08:22.303 [nacos-grpc-client-executor-192.168.247.138-140] INFO  com.alibaba.nacos.common.remote.client - [46f547ad-3539-4bb8-a112-fa80db3151d8] Ack server push request, request = NotifySubscriberRequest, requestId = 1977
2024-11-15 01:11:16.744 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 01:11:16.744 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 01:11:16.744 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 01:11:16.745 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 01:11:16.759 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:11:16.759 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:11:16.769 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:11:16.769 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:11:16.780 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:11:16.780 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:11:16.963 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 01:11:16.964 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 01:11:16.981 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 01:11:16.982 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 01:11:16.982 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 01:11:16.982 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@5cce3c09[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 01:11:16.983 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731603527211_192.168.247.1_62895
2024-11-15 01:11:16.994 [nacos-grpc-client-executor-192.168.247.138-176] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731603527211_192.168.247.1_62895]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 01:11:17.030 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5dc159ad[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 177]
2024-11-15 01:11:17.030 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@746f343d[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 250]
2024-11-15 01:11:17.030 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 01:11:17.033 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 01:11:17.034 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 01:11:17.035 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:11:17.035 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:11:17.178 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:11:17.183 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:11:17.183 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:11:17.183 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 01:11:17.195 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 01:11:23.625 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:11:23.710 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:11:24.314 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:11:24.330 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:11:24.331 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 01:11:25.008 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 01:11:25.011 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 01:11:25.034 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-15 01:11:25.271 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 01:11:25.308 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.311 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.314 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.574 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.640 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.642 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.646 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.647 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x0000015a0853ba00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.649 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.655 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.656 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:11:25.970 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 01:11:25.982 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 01:11:25.983 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 01:11:26.113 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 01:11:26.113 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1764 ms
2024-11-15 01:11:26.216 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 01:11:26.547 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 01:11:26.814 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 01:11:27.272 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:11:27.272 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 01:11:27.426 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 01:11:27.469 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 01:11:27.489 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 01:11:27.849 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:11:27.849 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 01:11:27.913 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:11:27.914 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 01:11:28.961 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 01:11:28.969 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:11:28.969 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 01:11:28.969 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 01:11:28.970 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 01:11:29.000 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 01:11:29.000 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 01:11:29.001 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 01:11:29.007 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 01:11:29.007 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 01:11:29.010 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 01:11:29.023 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 887f222d-3404-4a47-867d-f216da889414
2024-11-15 01:11:29.049 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 01:11:29.050 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 01:11:29.050 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 01:11:29.052 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 01:11:29.087 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 01:11:30.223 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731604290178_192.168.247.1_63144
2024-11-15 01:11:30.224 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Notify connected event to listeners.
2024-11-15 01:11:30.224 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 01:11:30.224 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 01:11:30.225 [main] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x0000015a089ac150
2024-11-15 01:11:30.226 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 01:11:30.243 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 01:11:30.500 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.744 seconds (process running for 8.544)
2024-11-15 01:11:40.321 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 01:11:40.321 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 01:11:40.323 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2024-11-15 01:11:40.331 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 01:11:40.332 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 01:11:40.440 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 01:11:40.754 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 01:11:40.934 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 01:11:40.961 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 01:11:40.967 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 01:11:40.969 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 01:11:40.976 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 01:11:40.986 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 01:11:40.986 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 01:11:41.020 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 01:11:41.024 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 01:11:41.029 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 01:11:41.031 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 01:11:41.032 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 01:11:41.034 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 01:11:41.064 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 01:11:41.064 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 01:11:41.064 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 625ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 01:11:41.079 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 01:11:41.082 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:11:41.082 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:11:41.094 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:11:41.094 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:11:41.100 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000160F063947C6B485AA9230000, offsetMsgId=C0A8F78A00002A9F0000000000004A4A, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=11]
2024-11-15 01:11:41.106 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 01:11:41","noteCreatorId":109}, tags: Like
2024-11-15 01:11:41.110 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 01:11:41.223 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T01:11:41(LocalDateTime), 1(Integer), 2024-11-15T01:11:41(LocalDateTime), 1(Integer)
2024-11-15 01:11:41.233 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 01:11:41.241 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000160F063947C6B485AA9B50001, offsetMsgId=C0A8F78A00002A9F0000000000004BCE, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=1]
2024-11-15 01:11:41.626 [nacos-grpc-client-executor-192.168.247.138-17] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Receive server push request, request = NotifySubscriberRequest, requestId = 1980
2024-11-15 01:11:41.627 [nacos-grpc-client-executor-192.168.247.138-17] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Ack server push request, request = NotifySubscriberRequest, requestId = 1980
2024-11-15 01:11:41.630 [nacos-grpc-client-executor-192.168.247.138-18] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Receive server push request, request = NotifySubscriberRequest, requestId = 1981
2024-11-15 01:11:41.631 [nacos-grpc-client-executor-192.168.247.138-18] INFO  com.alibaba.nacos.common.remote.client - [887f222d-3404-4a47-867d-f216da889414] Ack server push request, request = NotifySubscriberRequest, requestId = 1981
2024-11-15 01:19:56.075 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 01:19:56.075 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 01:19:56.076 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 01:19:56.076 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 01:19:56.091 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:19:56.093 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:19:56.187 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:19:56.187 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:19:56.231 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 01:19:56.232 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 01:19:56.237 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 01:19:56.238 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 01:19:56.238 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 01:19:56.238 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 01:19:56.239 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 01:19:56.240 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 01:19:56.240 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 01:19:56.240 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6387e9df[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 01:19:56.240 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731604290178_192.168.247.1_63144
2024-11-15 01:19:56.245 [nacos-grpc-client-executor-192.168.247.138-126] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731604290178_192.168.247.1_63144]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 01:19:56.251 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@5546717e[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 127]
2024-11-15 01:19:56.252 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@5ec481af[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 168]
2024-11-15 01:19:56.253 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 01:19:56.253 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 01:19:56.253 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 01:19:56.254 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:19:56.254 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:19:56.273 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:19:56.274 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:19:56.428 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:19:56.433 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 01:19:56.434 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 01:19:56.455 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 01:19:56.468 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 01:20:02.614 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:20:02.703 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:20:03.256 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:20:03.274 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:20:03.275 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 01:20:03.940 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 01:20:03.943 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 01:20:03.968 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2024-11-15 01:20:04.224 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 01:20:04.257 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.259 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.261 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.516 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.598 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.601 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.605 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.606 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x000002350b532a58] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.608 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.615 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.616 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 01:20:04.912 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 01:20:04.924 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 01:20:04.924 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 01:20:05.050 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 01:20:05.050 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1754 ms
2024-11-15 01:20:05.181 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 01:20:05.526 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 01:20:05.795 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 01:20:06.323 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:20:06.324 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 01:20:06.512 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 01:20:06.566 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 01:20:06.588 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 01:20:06.981 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:20:06.981 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 01:20:07.049 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 01:20:07.050 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 01:20:08.136 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 01:20:08.143 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 01:20:08.143 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 01:20:08.144 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 01:20:08.144 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 01:20:08.173 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 01:20:08.174 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 01:20:08.175 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 01:20:08.180 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 01:20:08.180 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 01:20:08.184 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 01:20:08.194 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 361796f2-d724-4dcf-a6b3-9577f75e5124
2024-11-15 01:20:08.218 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 01:20:08.218 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 01:20:08.218 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 01:20:08.221 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 01:20:08.252 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 01:20:09.320 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731604809282_192.168.247.1_63273
2024-11-15 01:20:09.321 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Notify connected event to listeners.
2024-11-15 01:20:09.321 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 01:20:09.321 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 01:20:09.322 [main] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x000002350b9c2bc8
2024-11-15 01:20:09.324 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 01:20:09.344 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 01:20:09.560 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.844 seconds (process running for 8.69)
2024-11-15 01:20:23.495 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 01:20:23.496 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 01:20:23.497 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2024-11-15 01:20:23.509 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 01:20:23.509 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 01:20:23.610 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: controller.com.swc.orangeBook.count.biz.NoteController, 请求方法: likeNote ===================================
2024-11-15 01:20:33.096 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 01:20:33.685 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 01:20:33.825 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 01:20:38.913 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 01:20:40.183 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 01:20:40.205 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 01:20:40.388 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 01:20:40.388 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 01:20:40.774 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 01:20:40.774 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 01:20:40.788 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:20:40.788 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:20:40.797 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:20:40.797 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:20:42.043 [nacos-grpc-client-executor-192.168.247.138-21] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Receive server push request, request = NotifySubscriberRequest, requestId = 1984
2024-11-15 01:20:42.044 [nacos-grpc-client-executor-192.168.247.138-21] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Ack server push request, request = NotifySubscriberRequest, requestId = 1984
2024-11-15 01:20:42.048 [nacos-grpc-client-executor-192.168.247.138-22] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Receive server push request, request = NotifySubscriberRequest, requestId = 1985
2024-11-15 01:20:42.048 [nacos-grpc-client-executor-192.168.247.138-22] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Ack server push request, request = NotifySubscriberRequest, requestId = 1985
2024-11-15 01:20:42.052 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 01:20:42.060 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 01:20:42.066 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 01:20:42.528 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 01:20:42.530 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 01:20:42.534 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 01:20:45.799 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 22191ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 01:20:45.810 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 01:20:45.833 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000012B0863947C6B4862F9000000, offsetMsgId=C0A8F78A00002A9F0000000000004E9C, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=12]
2024-11-15 01:20:45.837 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 01:20:45","noteCreatorId":109}, tags: Like
2024-11-15 01:20:45.841 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 01:20:45.937 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T01:20:45(LocalDateTime), 1(Integer), 2024-11-15T01:20:45(LocalDateTime), 1(Integer)
2024-11-15 01:20:45.946 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 01:20:45.953 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000012B0863947C6B4862F97E0001, offsetMsgId=C0A8F78A00002A9F0000000000005020, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=2]
2024-11-15 01:23:49.389 [nacos-grpc-client-executor-192.168.247.138-62] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Receive server push request, request = NotifySubscriberRequest, requestId = 1986
2024-11-15 01:23:49.390 [nacos-grpc-client-executor-192.168.247.138-62] INFO  com.alibaba.nacos.client.naming - removed ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 01:23:49.390 [nacos-grpc-client-executor-192.168.247.138-62] INFO  com.alibaba.nacos.client.naming - current ips:(0) service: DEFAULT_GROUP@@xiaochengshu-kv -> []
2024-11-15 01:23:49.391 [nacos-grpc-client-executor-192.168.247.138-62] INFO  com.alibaba.nacos.common.remote.client - [361796f2-d724-4dcf-a6b3-9577f75e5124] Ack server push request, request = NotifySubscriberRequest, requestId = 1986
2024-11-15 02:11:06.045 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 02:11:06.045 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 02:11:06.047 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 02:11:06.047 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 02:11:06.070 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:11:06.072 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:11:06.082 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:11:06.082 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:11:06.095 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:11:06.095 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:11:06.168 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 02:11:06.168 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 02:11:06.175 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 02:11:06.175 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 02:11:06.177 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 02:11:06.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 02:11:06.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 02:11:06.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 02:11:06.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 02:11:06.178 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 02:11:06.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 02:11:06.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 02:11:06.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 02:11:06.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 02:11:06.179 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 02:11:06.179 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 02:11:06.180 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 02:11:06.180 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 02:11:06.180 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 02:11:06.180 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@1cb607cf[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 02:11:06.180 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731604809282_192.168.247.1_63273
2024-11-15 02:11:06.189 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@2d8268cc[Running, pool size = 4, active threads = 1, queued tasks = 0, completed tasks = 646]
2024-11-15 02:11:06.189 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@2dee9a26[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 1016]
2024-11-15 02:11:06.189 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 02:11:06.189 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 02:11:06.190 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 02:11:06.192 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:11:06.192 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:11:06.196 [nacos-grpc-client-executor-192.168.247.138-646] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731604809282_192.168.247.1_63273]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 02:11:06.329 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:11:06.336 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 02:11:06.338 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 02:29:11.522 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:29:11.589 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:29:12.174 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:29:12.189 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:29:12.190 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 02:29:12.806 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 02:29:12.809 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 02:29:12.834 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2024-11-15 02:29:13.096 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 02:29:13.125 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.127 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.128 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.356 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.418 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.421 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.424 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.425 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x0000022f1353aa58] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.426 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.432 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.433 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:29:13.705 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 02:29:13.716 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 02:29:13.717 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 02:29:13.834 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 02:29:13.834 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1625 ms
2024-11-15 02:29:13.928 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 02:29:14.239 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 02:29:14.324 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'collectUnCollectNoteConsumer': Injection of resource dependencies failed
2024-11-15 02:29:14.324 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 02:29:14.329 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 02:29:14.330 [main] INFO  org.apache.catalina.core.StandardService - Stopping service [Tomcat]
2024-11-15 02:29:14.353 [main] INFO  o.s.b.a.logging.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-11-15 02:29:14.371 [main] ERROR org.springframework.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'collectUnCollectNoteConsumer': Injection of resource dependencies failed
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:303)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1397)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291)
	at com.swc.orangeBook.note.biz.OrangeBookNoteBizApplication.main(OrangeBookNoteBizApplication.java:18)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'noteCollectionDOMapper' defined in file [E:\Code\Projects\orangeBook\orangeBook-note\orangeBook-note-biz\target\classes\com\swc\orangeBook\note\biz\domain\mapper\NoteCollectionDOMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory': Error creating bean with name 'sqlSessionFactory' defined in class path resource [org/mybatis/spring/boot/autoconfigure/MybatisAutoConfiguration.class]: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception with message: Failed to parse mapping resource: 'file [E:\Code\Projects\orangeBook\orangeBook-note\orangeBook-note-biz\target\classes\mapper\ChannelDOMapper.xml]'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1494)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1388)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeanByName(AbstractAutowireCapableBeanFactory.java:458)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.autowireResource(CommonAnnotationBeanPostProcessor.java:496)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.getResource(CommonAnnotationBeanPostProcessor.java:467)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor$ResourceElement.getResourceToInject(CommonAnnotationBeanPostProcessor.java:618)
	at org.springframework.beans.factory.annotation.InjectionMetadata$InjectedElement.inject(InjectionMetadata.java:242)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:133)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessProperties(CommonAnnotationBeanPostProcessor.java:300)
	... 17 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [org/mybatis/spring/boot/autoconfigure/MybatisAutoConfiguration.class]: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception with message: Failed to parse mapping resource: 'file [E:\Code\Projects\orangeBook\orangeBook-note\orangeBook-note-biz\target\classes\mapper\ChannelDOMapper.xml]'
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireByType(AbstractAutowireCapableBeanFactory.java:1479)
	... 31 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception with message: Failed to parse mapping resource: 'file [E:\Code\Projects\orangeBook\orangeBook-note\orangeBook-note-biz\target\classes\mapper\ChannelDOMapper.xml]'
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 44 common frames omitted
Caused by: java.io.IOException: Failed to parse mapping resource: 'file [E:\Code\Projects\orangeBook\orangeBook-note\orangeBook-note-biz\target\classes\mapper\ChannelDOMapper.xml]'
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:700)
	at org.mybatis.spring.SqlSessionFactoryBean.afterPropertiesSet(SqlSessionFactoryBean.java:577)
	at org.mybatis.spring.SqlSessionFactoryBean.getObject(SqlSessionFactoryBean.java:720)
	at org.mybatis.spring.boot.autoconfigure.MybatisAutoConfiguration.sqlSessionFactory(MybatisAutoConfiguration.java:189)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 45 common frames omitted
Caused by: org.apache.ibatis.builder.BuilderException: Error parsing Mapper XML. The XML location is 'file [E:\Code\Projects\orangeBook\orangeBook-note\orangeBook-note-biz\target\classes\mapper\ChannelDOMapper.xml]'. Cause: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.swc.orangeBook.note.domain.dataobject.ChannelDO'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.swc.orangeBook.note.domain.dataobject.ChannelDO
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:128)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:100)
	at org.mybatis.spring.SqlSessionFactoryBean.buildSqlSessionFactory(SqlSessionFactoryBean.java:698)
	... 53 common frames omitted
Caused by: org.apache.ibatis.builder.BuilderException: Error resolving class. Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.swc.orangeBook.note.domain.dataobject.ChannelDO'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.swc.orangeBook.note.domain.dataobject.ChannelDO
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:118)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:270)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElement(XMLMapperBuilder.java:262)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.resultMapElements(XMLMapperBuilder.java:254)
	at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:124)
	... 55 common frames omitted
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'com.swc.orangeBook.note.domain.dataobject.ChannelDO'.  Cause: java.lang.ClassNotFoundException: Cannot find class: com.swc.orangeBook.note.domain.dataobject.ChannelDO
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:128)
	at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:150)
	at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:116)
	... 59 common frames omitted
Caused by: java.lang.ClassNotFoundException: Cannot find class: com.swc.orangeBook.note.domain.dataobject.ChannelDO
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:226)
	at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:103)
	at org.apache.ibatis.io.Resources.classForName(Resources.java:322)
	at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:124)
	... 61 common frames omitted
2024-11-15 02:32:54.745 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:32:54.815 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:32:55.336 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:32:55.349 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:32:55.349 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 02:32:55.983 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 02:32:55.986 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 02:32:56.011 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2024-11-15 02:32:56.246 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 02:32:56.280 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.281 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.283 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.514 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.576 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.578 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.582 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.583 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x00000258b853aa58] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.584 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.596 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.597 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:32:56.872 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 02:32:56.883 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 02:32:56.883 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 02:32:57.000 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 02:32:57.001 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1635 ms
2024-11-15 02:32:57.093 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 02:32:57.402 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 02:32:57.660 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 02:32:58.151 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:32:58.152 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 02:32:58.311 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 02:32:58.354 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 02:32:58.376 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 02:32:58.723 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:32:58.723 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 02:32:58.791 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:32:58.791 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 02:32:59.778 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 02:32:59.786 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:32:59.786 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 02:32:59.787 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 02:32:59.788 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 02:32:59.816 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 02:32:59.816 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 02:32:59.817 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 02:32:59.821 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 02:32:59.822 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 02:32:59.825 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 02:32:59.835 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 33f6d31d-3462-43b1-9c80-8806646e6935
2024-11-15 02:32:59.855 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 02:32:59.856 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 02:32:59.856 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 02:32:59.858 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 02:32:59.886 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 02:33:00.846 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731609180852_192.168.247.1_65072
2024-11-15 02:33:00.847 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Notify connected event to listeners.
2024-11-15 02:33:00.847 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 02:33:00.847 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 02:33:00.847 [main] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x00000258b89aba90
2024-11-15 02:33:00.848 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 02:33:00.861 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 02:33:01.044 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.049 seconds (process running for 7.691)
2024-11-15 02:33:52.330 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 02:33:52.330 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 02:33:52.331 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 02:33:52.339 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 02:33:52.339 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 02:33:52.443 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 02:33:52.717 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 02:33:52.909 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 02:33:52.930 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 02:33:52.935 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 02:33:52.937 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 02:33:52.944 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 02:33:52.956 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 02:33:52.956 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 02:33:52.992 [http-nio-8086-exec-1] WARN  c.s.o.note.biz.exception.GlobalExceptionHandler - /note/like request fail, errorCode: NOTE-20008, errorMessage: 您已经点赞过该笔记
2024-11-15 02:33:53.004 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 02:33:53.023 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 02:33:53.023 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 02:33:53.036 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(0) service: DEFAULT_GROUP@@xiaochengshu-kv -> []
2024-11-15 02:33:53.036 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(0) service: DEFAULT_GROUP@@xiaochengshu-user -> []
2024-11-15 02:33:53.047 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(0) service: DEFAULT_GROUP@@xiaochengshu-kv -> []
2024-11-15 02:33:53.047 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(0) service: DEFAULT_GROUP@@xiaochengshu-user -> []
2024-11-15 02:33:53.056 [NoteExecutor-2] WARN  o.s.cloud.loadbalancer.core.RoundRobinLoadBalancer - No servers available for service: xiaochengshu-user
2024-11-15 02:33:53.057 [NoteExecutor-3] WARN  o.s.cloud.loadbalancer.core.RoundRobinLoadBalancer - No servers available for service: xiaochengshu-kv
2024-11-15 02:33:53.064 [NoteExecutor-3] WARN  o.s.c.o.l.FeignBlockingLoadBalancerClient - Load balancer does not contain an instance for the service xiaochengshu-kv
2024-11-15 02:33:53.064 [NoteExecutor-2] WARN  o.s.c.o.l.FeignBlockingLoadBalancerClient - Load balancer does not contain an instance for the service xiaochengshu-user
2024-11-15 02:33:53.596 [nacos-grpc-client-executor-192.168.247.138-29] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Receive server push request, request = NotifySubscriberRequest, requestId = 1988
2024-11-15 02:33:53.596 [nacos-grpc-client-executor-192.168.247.138-29] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Ack server push request, request = NotifySubscriberRequest, requestId = 1988
2024-11-15 02:33:53.599 [nacos-grpc-client-executor-192.168.247.138-30] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Receive server push request, request = NotifySubscriberRequest, requestId = 1989
2024-11-15 02:33:53.599 [nacos-grpc-client-executor-192.168.247.138-30] INFO  com.alibaba.nacos.common.remote.client - [33f6d31d-3462-43b1-9c80-8806646e6935] Ack server push request, request = NotifySubscriberRequest, requestId = 1989
2024-11-15 02:34:55.011 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 02:34:55.011 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 02:34:55.012 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1846789498420068425}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 02:34:55.015 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 02:34:55.015 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 02:34:55.017 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 02:34:55.020 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 02:34:55.020 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 02:34:55.023 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 02:34:55.023 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 02:34:55.024 [NoteExecutor-6] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 02:34:55.024 [NoteExecutor-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 02:34:55.026 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1846789498420068425(Long)
2024-11-15 02:34:55.028 [NoteExecutor-6] WARN  o.s.cloud.loadbalancer.core.RoundRobinLoadBalancer - No servers available for service: xiaochengshu-kv
2024-11-15 02:34:55.028 [NoteExecutor-5] WARN  o.s.cloud.loadbalancer.core.RoundRobinLoadBalancer - No servers available for service: xiaochengshu-user
2024-11-15 02:34:55.029 [NoteExecutor-6] WARN  o.s.c.o.l.FeignBlockingLoadBalancerClient - Load balancer does not contain an instance for the service xiaochengshu-kv
2024-11-15 02:34:55.029 [NoteExecutor-5] WARN  o.s.c.o.l.FeignBlockingLoadBalancerClient - Load balancer does not contain an instance for the service xiaochengshu-user
2024-11-15 02:34:55.031 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 02:34:55.034 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 02:34:55.035 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 02:34:55.037 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 02:34:55.062 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 50ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 02:34:55.065 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 02:34:55.098 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015ED063947C6B48A6DCF10000, offsetMsgId=C0A8F78A00002A9F00000000000052EE, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=13]
2024-11-15 02:34:55.103 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1846789498420068425,"type":1,"createTime":"2024-11-15 02:34:55","noteCreatorId":109}, tags: Like
2024-11-15 02:34:55.107 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 02:34:55.235 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1846789498420068425(Long), 2024-11-15T02:34:55(LocalDateTime), 1(Integer), 2024-11-15T02:34:55(LocalDateTime), 1(Integer)
2024-11-15 02:34:55.245 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 02:34:55.253 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015ED063947C6B48A6DD920001, offsetMsgId=C0A8F78A00002A9F0000000000005472, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=6]
2024-11-15 02:54:12.647 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 02:54:12.647 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 02:54:12.647 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 02:54:12.648 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 02:54:12.675 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:54:12.676 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:54:12.680 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:54:12.681 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:54:12.688 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:54:12.689 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:54:12.728 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 02:54:12.728 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 02:54:12.733 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 02:54:12.734 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 02:54:12.735 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 02:54:12.735 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 02:54:12.735 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 02:54:12.735 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 02:54:12.735 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@e660be8[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 02:54:12.735 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731609180852_192.168.247.1_65072
2024-11-15 02:54:12.737 [nacos-grpc-client-executor-192.168.247.138-289] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731609180852_192.168.247.1_65072]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 02:54:12.740 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@7fbacd3a[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 290]
2024-11-15 02:54:12.740 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@5757dd5a[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 424]
2024-11-15 02:54:12.740 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 02:54:12.741 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 02:54:12.741 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 02:54:12.742 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:54:12.742 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:54:12.879 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:54:12.884 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:54:12.884 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:54:12.885 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 02:54:12.886 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 02:54:15.792 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:54:15.868 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:54:16.497 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:54:16.518 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:54:16.519 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 02:54:17.285 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 02:54:17.288 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 02:54:17.311 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-15 02:54:17.551 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 02:54:17.584 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.585 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.587 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.847 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.920 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.923 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.927 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.928 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x00000182bc53ba00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.931 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.938 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:17.939 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 02:54:18.274 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 02:54:18.285 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 02:54:18.285 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 02:54:18.408 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 02:54:18.408 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1863 ms
2024-11-15 02:54:18.507 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 02:54:18.836 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 02:54:19.090 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 02:54:19.560 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:54:19.560 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 02:54:19.710 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 02:54:19.757 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 02:54:19.781 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 02:54:20.136 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:54:20.136 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 02:54:20.205 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:54:20.205 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 02:54:21.272 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 02:54:21.279 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 02:54:21.279 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 02:54:21.280 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 02:54:21.280 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 02:54:21.306 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 02:54:21.306 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 02:54:21.307 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 02:54:21.312 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 02:54:21.312 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 02:54:21.315 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 02:54:21.328 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of d4914956-fe85-4fc2-aa7b-96baf22a0f55
2024-11-15 02:54:21.350 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 02:54:21.351 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 02:54:21.351 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 02:54:21.356 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 02:54:21.384 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 02:54:22.339 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731610462354_192.168.247.1_49219
2024-11-15 02:54:22.340 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Notify connected event to listeners.
2024-11-15 02:54:22.340 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 02:54:22.340 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 02:54:22.341 [main] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x00000182bc9abca0
2024-11-15 02:54:22.342 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 02:54:22.357 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 02:54:22.568 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.611 seconds (process running for 8.283)
2024-11-15 02:55:58.170 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 02:55:58.170 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 02:55:58.171 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2024-11-15 02:55:58.179 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 02:55:58.179 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 02:55:58.268 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1849473040467886111}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: collectNote =================================== 
2024-11-15 02:55:58.546 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 02:55:58.700 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1849473040467886111(Long)
2024-11-15 02:55:58.724 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 02:55:58.729 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 02:55:58.730 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1849473040467886111(Long)
2024-11-15 02:55:58.737 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 02:55:58.749 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 02:55:58.749 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 02:55:58.779 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_collection where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 02:55:58.782 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 111(Long), 1849473040467886111(Long)
2024-11-15 02:55:58.786 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 02:55:58.788 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectByUserId - ==>  Preparing: select note_id from t_note_collection where user_id = ? and status = 1
2024-11-15 02:55:58.789 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectByUserId - ==> Parameters: 111(Long)
2024-11-15 02:55:58.791 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectByUserId - <==      Total: 0
2024-11-15 02:55:58.816 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [收藏笔记], 耗时: 548ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 02:55:58.833 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 02:55:58.834 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 02:55:58.834 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 02:55:58.848 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(0) service: DEFAULT_GROUP@@xiaochengshu-user -> []
2024-11-15 02:55:58.848 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(0) service: DEFAULT_GROUP@@xiaochengshu-kv -> []
2024-11-15 02:55:58.854 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015E3C63947C6B48BA257D0000, offsetMsgId=C0A8F78A00002A9F000000000000573F, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=4]
2024-11-15 02:55:58.860 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(0) service: DEFAULT_GROUP@@xiaochengshu-user -> []
2024-11-15 02:55:58.860 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(0) service: DEFAULT_GROUP@@xiaochengshu-kv -> []
2024-11-15 02:55:58.861 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1849473040467886111,"type":1,"createTime":"2024-11-15 02:55:58","noteCreatorId":109}, tags: Collect
2024-11-15 02:55:58.865 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_collection(user_id,note_id,create_time,status) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE create_time=?,status=?;
2024-11-15 02:55:58.872 [NoteExecutor-3] WARN  o.s.cloud.loadbalancer.core.RoundRobinLoadBalancer - No servers available for service: xiaochengshu-kv
2024-11-15 02:55:58.872 [NoteExecutor-2] WARN  o.s.cloud.loadbalancer.core.RoundRobinLoadBalancer - No servers available for service: xiaochengshu-user
2024-11-15 02:55:58.880 [NoteExecutor-2] WARN  o.s.c.o.l.FeignBlockingLoadBalancerClient - Load balancer does not contain an instance for the service xiaochengshu-user
2024-11-15 02:55:58.880 [NoteExecutor-3] WARN  o.s.c.o.l.FeignBlockingLoadBalancerClient - Load balancer does not contain an instance for the service xiaochengshu-kv
2024-11-15 02:55:58.976 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==> Parameters: 111(Long), 1849473040467886111(Long), 2024-11-15T02:55:58(LocalDateTime), 1(Integer), 2024-11-15T02:55:58(LocalDateTime), 1(Integer)
2024-11-15 02:55:58.996 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - <==    Updates: 2
2024-11-15 02:55:59.004 [NettyClientPublicExecutor_2] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000015E3C63947C6B48BA26180001, offsetMsgId=C0A8F78A00002A9F00000000000058CC, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=0]
2024-11-15 02:55:59.363 [nacos-grpc-client-executor-192.168.247.138-36] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Receive server push request, request = NotifySubscriberRequest, requestId = 1992
2024-11-15 02:55:59.364 [nacos-grpc-client-executor-192.168.247.138-36] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Ack server push request, request = NotifySubscriberRequest, requestId = 1992
2024-11-15 02:55:59.366 [nacos-grpc-client-executor-192.168.247.138-37] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Receive server push request, request = NotifySubscriberRequest, requestId = 1993
2024-11-15 02:55:59.366 [nacos-grpc-client-executor-192.168.247.138-37] INFO  com.alibaba.nacos.common.remote.client - [d4914956-fe85-4fc2-aa7b-96baf22a0f55] Ack server push request, request = NotifySubscriberRequest, requestId = 1993
2024-11-15 02:57:00.235 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 02:57:00.235 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 02:57:00.236 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 02:57:00.237 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 02:57:00.251 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:57:00.252 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:57:00.256 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:57:00.257 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:57:00.262 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:57:00.262 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:57:00.302 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 02:57:00.302 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 02:57:00.307 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 02:57:00.308 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 02:57:00.308 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 02:57:00.308 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 02:57:00.308 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 02:57:00.309 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 02:57:00.309 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4bfbafd5[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 02:57:00.310 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731610462354_192.168.247.1_49219
2024-11-15 02:57:00.313 [nacos-grpc-client-executor-192.168.247.138-50] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731610462354_192.168.247.1_49219]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 02:57:00.316 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@28856b05[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 51]
2024-11-15 02:57:00.316 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@547d90a[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 52]
2024-11-15 02:57:00.316 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 02:57:00.317 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 02:57:00.317 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 02:57:00.317 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:57:00.317 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:57:00.437 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 02:57:00.440 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 02:57:00.441 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 02:57:00.441 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 02:57:00.447 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 12:40:23.122 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 12:40:23.234 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 12:40:23.961 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 12:40:23.979 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 12:40:23.980 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 12:40:24.901 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 12:40:24.906 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 12:40:24.942 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2024-11-15 12:40:25.317 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 12:40:25.356 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.358 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.361 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.649 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.739 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.742 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.747 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.748 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x000001ee8551aca8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.751 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.760 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:25.761 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 12:40:26.174 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 12:40:26.194 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 12:40:26.194 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 12:40:26.398 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 12:40:26.399 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2397 ms
2024-11-15 12:40:26.530 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 12:40:26.948 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 12:40:27.329 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 12:40:28.101 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 12:40:28.101 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 12:40:28.336 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 12:40:28.407 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 12:40:28.438 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 12:40:28.980 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 12:40:28.981 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 12:40:29.141 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 12:40:29.141 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 12:40:30.626 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 12:40:30.636 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 12:40:30.636 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 12:40:30.637 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 12:40:30.638 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 12:40:30.678 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 12:40:30.679 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 12:40:30.680 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 12:40:30.686 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 12:40:30.687 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 12:40:30.692 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 12:40:30.713 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 6ca8b232-cc90-463e-b09c-fa2b0e22c3a7
2024-11-15 12:40:30.748 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 12:40:30.748 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 12:40:30.749 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 12:40:30.751 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 12:40:30.786 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 12:40:32.121 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731645639685_192.168.247.1_62773
2024-11-15 12:40:32.122 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Notify connected event to listeners.
2024-11-15 12:40:32.122 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 12:40:32.122 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 12:40:32.123 [main] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x000001ee859ad8d8
2024-11-15 12:40:32.124 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 12:40:32.142 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 12:40:32.386 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 10.322 seconds (process running for 11.15)
2024-11-15 12:42:19.057 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 12:42:19.058 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 12:42:19.059 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 12:42:19.067 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 109
2024-11-15 12:42:19.068 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 109
2024-11-15 12:42:19.184 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"测试测试测试标题22222","content":"测试测试内容","topicId":1}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: publishNote =================================== 
2024-11-15 12:42:19.192 [http-nio-8086-exec-1] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 12:42:19.285 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-15 12:42:19.301 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-distributed-id-generator -> [{"ip":"192.168.17.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 12:42:19.311 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-distributed-id-generator -> [{"ip":"192.168.17.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 12:42:19.463 [http-nio-8086-exec-1] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 12:42:19.478 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 12:42:19.483 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 12:42:19.483 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 12:42:19.826 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==>  Preparing: select name from t_topic where id = ?
2024-11-15 12:42:19.850 [nacos-grpc-client-executor-192.168.247.138-46] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Receive server push request, request = NotifySubscriberRequest, requestId = 1995
2024-11-15 12:42:19.851 [nacos-grpc-client-executor-192.168.247.138-46] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Ack server push request, request = NotifySubscriberRequest, requestId = 1995
2024-11-15 12:42:20.033 [nacos-grpc-client-executor-192.168.247.138-47] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Receive server push request, request = NotifySubscriberRequest, requestId = 1996
2024-11-15 12:42:20.034 [nacos-grpc-client-executor-192.168.247.138-47] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Ack server push request, request = NotifySubscriberRequest, requestId = 1996
2024-11-15 12:42:20.045 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==> Parameters: 1(Long)
2024-11-15 12:42:20.073 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - <==      Total: 0
2024-11-15 12:42:20.077 [http-nio-8086-exec-1] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - ==>  Preparing: insert into t_note (id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-11-15 12:42:20.206 [http-nio-8086-exec-1] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - ==> Parameters: 1857282961905287197(Long), 测试测试测试标题22222(String), false(Boolean), 109(Long), 1(Long), null, false(Boolean), 1(Integer), null, http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg(String), 0(Integer), 2024-11-15T12:42:20.076504900(LocalDateTime), 2024-11-15T12:42:20.076504900(LocalDateTime), 1(Integer), 27bc9474-5425-4fa8-bc3b-70d6a4b367d1(String)
2024-11-15 12:42:20.222 [http-nio-8086-exec-1] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - <==    Updates: 1
2024-11-15 12:42:20.222 [http-nio-8086-exec-1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 笔记存储成功:NoteDO(id=1857282961905287197, title=测试测试测试标题22222, isContentEmpty=false, creatorId=109, topicId=1, topicName=null, isTop=false, type=1, imgUris=null, videoUri=http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg, visible=0, createTime=2024-11-15T12:42:20.076504900, updateTime=2024-11-15T12:42:20.076504900, status=1, contentUuid=27bc9474-5425-4fa8-bc3b-70d6a4b367d1)
2024-11-15 12:42:20.242 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 1060ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 12:42:20.258 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 109
2024-11-15 12:42:20.320 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4AD2F8EF0000, offsetMsgId=C0A8F78A00002A9F0000000000005B9F, messageQueue=MessageQueue [topic=NoteOperateTopic, brokerName=192.168.247.138, queueId=1], queueOffset=0]
2024-11-15 16:58:13.991 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 16:58:13.998 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 16:58:14.078 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消点赞笔记], 入参: {"id":1846789498420068425}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unlikeNote =================================== 
2024-11-15 16:58:14.528 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 16:58:14.541 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1846789498420068425(Long)
2024-11-15 16:58:14.554 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 16:58:14.560 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 16:58:14.563 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1846789498420068425(Long)
2024-11-15 16:58:14.570 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 16:58:14.581 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 16:58:14.581 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 16:58:14.622 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 16:58:14.634 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 16:58:14.634 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 16:58:14.637 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消点赞笔记], 耗时: 565ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 16:58:14.643 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 16:58:14.646 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BBD42F10001, offsetMsgId=C0A8F78A00002A9F000000000000EDE5, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=6]
2024-11-15 16:58:14.656 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1846789498420068425,"type":0,"createTime":"2024-11-15 16:58:14","noteCreatorId":109}, tags: Unlike
2024-11-15 16:58:14.664 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==>  Preparing: update t_note_like set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 16:58:14.670 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T16:58:14(LocalDateTime), 111(Long), 1846789498420068425(Long)
2024-11-15 16:58:14.678 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - <==    Updates: 1
2024-11-15 16:58:14.685 [NettyClientPublicExecutor_3] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BBD431A0002, offsetMsgId=C0A8F78A00002A9F000000000000EF6B, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=7]
2024-11-15 16:58:15.174 [nacos-grpc-client-executor-192.168.247.138-3153] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Receive server push request, request = NotifySubscriberRequest, requestId = 1997
2024-11-15 16:58:15.175 [nacos-grpc-client-executor-192.168.247.138-3153] INFO  com.alibaba.nacos.common.remote.client - [6ca8b232-cc90-463e-b09c-fa2b0e22c3a7] Ack server push request, request = NotifySubscriberRequest, requestId = 1997
2024-11-15 17:43:24.901 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 17:43:24.901 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 17:43:24.906 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消点赞笔记], 入参: {"id":1846789498420068425}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unlikeNote =================================== 
2024-11-15 17:43:24.914 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消点赞笔记], 耗时: 9ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 17:43:24.915 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 17:43:24.917 [NettyClientPublicExecutor_4] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BE69DF20003, offsetMsgId=C0A8F78A00002A9F0000000000017E1D, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=7]
2024-11-15 17:43:24.919 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1846789498420068425,"type":0,"createTime":"2024-11-15 17:43:24","noteCreatorId":111}, tags: Unlike
2024-11-15 17:43:24.928 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==>  Preparing: update t_note_like set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 17:43:24.929 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T17:43:24(LocalDateTime), 111(Long), 1846789498420068425(Long)
2024-11-15 17:43:24.932 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - <==    Updates: 0
2024-11-15 17:45:39.034 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 17:45:39.034 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 17:45:39.035 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消点赞笔记], 入参: {"id":1846789498420068425}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unlikeNote =================================== 
2024-11-15 17:45:39.042 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消点赞笔记], 耗时: 7ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 17:45:39.043 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 17:45:39.046 [NettyClientPublicExecutor_5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BE8A9E20004, offsetMsgId=C0A8F78A00002A9F0000000000017FA3, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=8]
2024-11-15 17:45:39.048 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1846789498420068425,"type":0,"createTime":"2024-11-15 17:45:39","noteCreatorId":111}, tags: Unlike
2024-11-15 17:45:39.049 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==>  Preparing: update t_note_like set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 17:45:39.050 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T17:45:39(LocalDateTime), 111(Long), 1846789498420068425(Long)
2024-11-15 17:45:39.052 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_3] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - <==    Updates: 0
2024-11-15 17:54:36.435 [http-nio-8086-exec-9] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 17:54:36.435 [http-nio-8086-exec-9] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 17:54:36.441 [http-nio-8086-exec-9] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 17:54:36.444 [http-nio-8086-exec-9] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 17:54:36.445 [http-nio-8086-exec-9] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1857282961905287197(Long)
2024-11-15 17:54:36.447 [http-nio-8086-exec-9] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 17:54:36.448 [NoteExecutor-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 17:54:36.449 [NoteExecutor-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857282961905287197(Long)
2024-11-15 17:54:36.452 [NoteExecutor-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 17:54:36.453 [NoteExecutor-7] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 17:54:36.453 [NoteExecutor-6] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 110
2024-11-15 17:54:36.457 [http-nio-8086-exec-9] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 16ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 17:54:36.458 [http-nio-8086-exec-9] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 17:54:36.460 [NettyClientPublicExecutor_6] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BF0DD290005, offsetMsgId=C0A8F78A00002A9F00000000000192A9, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=14]
2024-11-15 17:54:36.463 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1857282961905287197,"type":1,"createTime":"2024-11-15 17:54:36","noteCreatorId":109}, tags: Like
2024-11-15 17:54:36.464 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 17:54:36.469 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1857282961905287197(Long), 2024-11-15T17:54:36(LocalDateTime), 1(Integer), 2024-11-15T17:54:36(LocalDateTime), 1(Integer)
2024-11-15 17:54:36.476 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 1
2024-11-15 17:54:36.481 [NettyClientPublicExecutor_7] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BF0DD3E0006, offsetMsgId=C0A8F78A00002A9F000000000001942D, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=2], queueOffset=5]
2024-11-15 17:59:22.060 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 17:59:22.060 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 17:59:22.061 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unlikeNote =================================== 
2024-11-15 17:59:22.067 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消点赞笔记], 耗时: 6ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 17:59:22.068 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 17:59:22.069 [NettyClientPublicExecutor_8] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BF538D30007, offsetMsgId=C0A8F78A00002A9F00000000000196FA, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=15]
2024-11-15 17:59:22.070 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1857282961905287197,"type":0,"createTime":"2024-11-15 17:59:22","noteCreatorId":110}, tags: Unlike
2024-11-15 17:59:22.072 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==>  Preparing: update t_note_like set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 17:59:22.073 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T17:59:22(LocalDateTime), 110(Long), 1857282961905287197(Long)
2024-11-15 17:59:22.078 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_5] DEBUG c.s.o.n.b.d.m.N.update2UnlikeByUserIdAndNoteId - <==    Updates: 1
2024-11-15 17:59:22.081 [NettyClientPublicExecutor_9] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记取消点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BF538DF0008, offsetMsgId=C0A8F78A00002A9F0000000000019880, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=2], queueOffset=6]
2024-11-15 18:02:52.404 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 18:02:52.404 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 18:02:52.406 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 18:02:52.414 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 18:02:52.418 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==> Parameters: 110(Long), 1857282961905287197(Long)
2024-11-15 18:02:52.420 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - <==      Total: 1
2024-11-15 18:02:52.423 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 17ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 18:02:52.424 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 18:02:52.426 [NettyClientPublicExecutor_10] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BF86E880009, offsetMsgId=C0A8F78A00002A9F0000000000019B4E, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=16]
2024-11-15 18:02:52.427 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_6] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1857282961905287197,"type":1,"createTime":"2024-11-15 18:02:52","noteCreatorId":110}, tags: Like
2024-11-15 18:02:52.428 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_6] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 18:02:52.429 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_6] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1857282961905287197(Long), 2024-11-15T18:02:52(LocalDateTime), 1(Integer), 2024-11-15T18:02:52(LocalDateTime), 1(Integer)
2024-11-15 18:02:52.434 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_6] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 18:02:52.437 [NettyClientPublicExecutor_11] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000011CE463947C6B4BF86E93000A, offsetMsgId=C0A8F78A00002A9F0000000000019CD2, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=8]
2024-11-15 18:13:47.007 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 18:13:47.007 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 18:13:47.007 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 18:13:47.008 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 18:13:47.277 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:13:47.279 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:13:47.295 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:13:47.296 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:13:47.312 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:13:47.312 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:13:47.378 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 18:13:47.378 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 18:13:47.383 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 18:13:47.384 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 18:13:47.384 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 18:13:47.384 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 18:13:47.385 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 18:13:47.385 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 18:13:47.385 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 18:13:47.385 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 18:13:47.385 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@50cbd03b[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 18:13:47.386 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731645639685_192.168.247.1_62773
2024-11-15 18:13:47.388 [nacos-grpc-client-executor-192.168.247.138-4060] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731645639685_192.168.247.1_62773]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 18:13:47.398 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@70cd16cf[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4061]
2024-11-15 18:13:47.398 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1a735cb0[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 6663]
2024-11-15 18:13:47.398 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 18:13:47.399 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 18:13:47.399 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 18:13:47.400 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:13:47.400 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:13:47.538 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:13:47.545 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:13:47.545 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:13:47.546 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 18:13:47.549 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 18:13:51.342 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:13:51.411 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:13:52.159 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:13:52.181 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:13:52.182 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 18:13:52.934 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 18:13:52.937 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 18:13:52.965 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2024-11-15 18:13:53.690 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 18:13:53.733 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:53.735 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:53.737 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.081 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.166 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.170 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.176 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.177 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x000002b3c153ba00] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.181 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.191 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.192 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:13:54.614 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 18:13:54.629 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 18:13:54.629 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 18:13:54.818 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 18:13:54.819 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2614 ms
2024-11-15 18:13:54.958 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 18:13:55.353 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 18:13:55.669 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 18:13:56.165 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:13:56.165 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 18:13:56.336 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:13:56.388 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:13:56.410 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:13:56.814 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:13:56.814 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 18:13:56.881 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:13:56.882 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 18:13:58.106 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 18:13:58.115 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:13:58.115 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 18:13:58.115 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 18:13:58.116 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 18:13:58.151 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 18:13:58.151 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 18:13:58.152 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 18:13:58.159 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 18:13:58.159 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 18:13:58.163 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 18:13:58.177 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 2b497bd4-7b8c-472d-9e5f-d6b84d992273
2024-11-15 18:13:58.203 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 18:13:58.203 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 18:13:58.203 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 18:13:58.206 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 18:13:58.238 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 18:13:59.391 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731665639771_192.168.247.1_57847
2024-11-15 18:13:59.391 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Notify connected event to listeners.
2024-11-15 18:13:59.392 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 18:13:59.392 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 18:13:59.392 [main] INFO  com.alibaba.nacos.common.remote.client - [2b497bd4-7b8c-472d-9e5f-d6b84d992273] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x000002b3c19adf90
2024-11-15 18:13:59.393 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 18:13:59.407 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 18:13:59.614 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 9.106 seconds (process running for 9.814)
2024-11-15 18:16:43.308 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 18:16:43.309 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 18:16:43.310 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 18:16:43.317 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 18:16:43.318 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 18:16:43.426 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 18:16:43.757 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 18:16:43.927 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 110(Long), 1857282961905287197(Long)
2024-11-15 18:16:43.950 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 18:16:43.953 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 18:16:43.954 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 110(Long)
2024-11-15 18:16:43.958 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 2
2024-11-15 18:16:43.981 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 556ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 18:16:43.999 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 18:16:44.016 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000130C063947C6B4C051EE70000, offsetMsgId=C0A8F78A00002A9F000000000001B11F, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=17]
2024-11-15 18:16:44.019 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1857282961905287197,"type":1,"createTime":"2024-11-15 18:16:43","noteCreatorId":110}, tags: Like
2024-11-15 18:16:44.021 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 18:16:44.131 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1857282961905287197(Long), 2024-11-15T18:16:43(LocalDateTime), 1(Integer), 2024-11-15T18:16:43(LocalDateTime), 1(Integer)
2024-11-15 18:16:44.142 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 18:16:44.150 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F00000130C063947C6B4C051F730001, offsetMsgId=C0A8F78A00002A9F000000000001B2A3, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=2], queueOffset=7]
2024-11-15 18:19:21.383 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 18:19:21.383 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 18:19:21.383 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 18:19:21.384 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 18:19:21.397 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:19:21.399 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:19:21.404 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:19:21.416 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:19:21.417 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:19:21.451 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 18:19:21.451 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 18:19:21.456 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 18:19:21.456 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 18:19:21.456 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@77d6291f[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 18:19:21.457 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731665639771_192.168.247.1_57847
2024-11-15 18:19:21.460 [nacos-grpc-client-executor-192.168.247.138-85] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731665639771_192.168.247.1_57847]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 18:19:21.462 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@769f2270[Running, pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 86]
2024-11-15 18:19:21.462 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@21bd9f57[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 107]
2024-11-15 18:19:21.462 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 18:19:21.462 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 18:19:21.462 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 18:19:21.463 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:19:21.463 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:19:21.506 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:19:21.583 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:19:21.586 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:19:21.586 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:19:21.587 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 18:19:21.593 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 18:19:25.268 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:19:25.345 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:19:25.901 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:19:25.915 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:19:25.916 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 18:19:26.588 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 18:19:26.592 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 18:19:26.616 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2024-11-15 18:19:26.871 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 18:19:26.910 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:26.912 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:26.914 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.192 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.272 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.275 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.279 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.280 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x00000168c1531d10] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.282 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.289 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.290 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:19:27.607 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 18:19:27.618 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 18:19:27.619 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 18:19:27.740 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 18:19:27.740 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1805 ms
2024-11-15 18:19:27.869 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 18:19:28.206 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 18:19:28.470 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 18:19:28.987 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:19:28.988 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 18:19:29.171 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:19:29.221 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:19:29.240 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:19:29.609 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:19:29.610 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 18:19:29.676 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:19:29.676 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 18:19:30.720 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 18:19:30.727 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:19:30.727 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 18:19:30.728 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 18:19:30.728 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 18:19:30.756 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 18:19:30.756 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 18:19:30.757 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 18:19:30.762 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 18:19:30.762 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 18:19:30.765 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 18:19:30.776 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e
2024-11-15 18:19:30.800 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 18:19:30.800 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 18:19:30.801 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 18:19:30.804 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 18:19:30.835 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 18:19:32.028 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731665972393_192.168.247.1_58082
2024-11-15 18:19:32.029 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Notify connected event to listeners.
2024-11-15 18:19:32.029 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 18:19:32.029 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 18:19:32.030 [main] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x00000168c19c18c0
2024-11-15 18:19:32.031 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 18:19:32.047 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 18:19:32.250 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.748 seconds (process running for 9.122)
2024-11-15 18:23:44.244 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 18:23:44.244 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 18:23:44.246 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 18:23:44.254 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 110
2024-11-15 18:23:44.254 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 110
2024-11-15 18:23:44.350 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 18:24:11.820 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 18:24:12.499 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - ==> Parameters: 110(Long), 1857282961905287197(Long)
2024-11-15 18:24:12.640 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteLikeDOMapper.selectNoteIsLiked - <==      Total: 1
2024-11-15 18:24:12.690 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 28341ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 18:24:12.705 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 110
2024-11-15 18:24:12.721 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001722063947C6B4C0BF7A90000, offsetMsgId=C0A8F78A00002A9F000000000001B570, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=18]
2024-11-15 18:24:12.725 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":110,"noteId":1857282961905287197,"type":1,"createTime":"2024-11-15 18:24:12","noteCreatorId":110}, tags: Like
2024-11-15 18:24:12.727 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 18:24:12.823 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 110(Long), 1857282961905287197(Long), 2024-11-15T18:24:12(LocalDateTime), 1(Integer), 2024-11-15T18:24:12(LocalDateTime), 1(Integer)
2024-11-15 18:24:12.833 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2024-11-15 18:24:12.843 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001722063947C6B4C0BF8260001, offsetMsgId=C0A8F78A00002A9F000000000001B6F4, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=0], queueOffset=9]
2024-11-15 18:26:35.080 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 18:26:35.081 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 18:26:35.082 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 18:26:46.188 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 11106ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 18:26:46.189 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 18:26:46.192 [NettyClientPublicExecutor_3] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001722063947C6B4C0E4F2C0002, offsetMsgId=C0A8F78A00002A9F000000000001B9C1, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=9]
2024-11-15 18:26:46.192 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1857282961905287197,"type":1,"createTime":"2024-11-15 18:26:46","noteCreatorId":110}, tags: Like
2024-11-15 18:26:46.194 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 18:26:46.195 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 111(Long), 1857282961905287197(Long), 2024-11-15T18:26:46(LocalDateTime), 1(Integer), 2024-11-15T18:26:46(LocalDateTime), 1(Integer)
2024-11-15 18:26:46.200 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 1
2024-11-15 18:26:46.204 [NettyClientPublicExecutor_4] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001722063947C6B4C0E4F390003, offsetMsgId=C0A8F78A00002A9F000000000001BB45, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=3]
2024-11-15 18:29:03.447 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 109
2024-11-15 18:29:03.447 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 109
2024-11-15 18:29:03.455 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"对齐对齐测试测试测试标题22222","content":"对齐对齐测试测试内容","topicId":1}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: publishNote =================================== 
2024-11-15 18:29:03.458 [http-nio-8086-exec-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 18:29:03.540 [http-nio-8086-exec-5] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-15 18:29:03.557 [http-nio-8086-exec-5] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-distributed-id-generator -> [{"ip":"192.168.17.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 18:29:03.567 [http-nio-8086-exec-5] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-distributed-id-generator -> [{"ip":"192.168.17.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 18:29:03.699 [http-nio-8086-exec-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 18:29:03.718 [http-nio-8086-exec-5] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 18:29:03.722 [http-nio-8086-exec-5] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 18:29:03.723 [http-nio-8086-exec-5] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 18:29:03.837 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==>  Preparing: select name from t_topic where id = ?
2024-11-15 18:29:03.838 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==> Parameters: 1(Long)
2024-11-15 18:29:03.842 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - <==      Total: 0
2024-11-15 18:29:03.845 [http-nio-8086-exec-5] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - ==>  Preparing: insert into t_note (id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-11-15 18:29:03.847 [http-nio-8086-exec-5] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - ==> Parameters: 1857370221199753220(Long), 对齐对齐测试测试测试标题22222(String), false(Boolean), 109(Long), 1(Long), null, false(Boolean), 1(Integer), null, http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg(String), 0(Integer), 2024-11-15T18:29:03.844045800(LocalDateTime), 2024-11-15T18:29:03.844045800(LocalDateTime), 1(Integer), b067c9d2-c713-468e-8e61-043bb1d85776(String)
2024-11-15 18:29:03.855 [http-nio-8086-exec-5] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - <==    Updates: 1
2024-11-15 18:29:03.855 [http-nio-8086-exec-5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 笔记存储成功:NoteDO(id=1857370221199753220, title=对齐对齐测试测试测试标题22222, isContentEmpty=false, creatorId=109, topicId=1, topicName=null, isTop=false, type=1, imgUris=null, videoUri=http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg, visible=0, createTime=2024-11-15T18:29:03.844045800, updateTime=2024-11-15T18:29:03.844045800, status=1, contentUuid=b067c9d2-c713-468e-8e61-043bb1d85776)
2024-11-15 18:29:03.866 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 412ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 18:29:03.868 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 109
2024-11-15 18:29:03.871 [NettyClientPublicExecutor_5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001722063947C6B4C1068FC0004, offsetMsgId=C0A8F78A00002A9F000000000001BE12, messageQueue=MessageQueue [topic=NoteOperateTopic, brokerName=192.168.247.138, queueId=0], queueOffset=0]
2024-11-15 18:29:04.072 [nacos-grpc-client-executor-192.168.247.138-135] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Receive server push request, request = NotifySubscriberRequest, requestId = 2002
2024-11-15 18:29:04.072 [nacos-grpc-client-executor-192.168.247.138-135] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Ack server push request, request = NotifySubscriberRequest, requestId = 2002
2024-11-15 18:29:04.259 [nacos-grpc-client-executor-192.168.247.138-136] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Receive server push request, request = NotifySubscriberRequest, requestId = 2003
2024-11-15 18:29:04.260 [nacos-grpc-client-executor-192.168.247.138-136] INFO  com.alibaba.nacos.common.remote.client - [c5eae2d4-a7cc-4d74-bb04-bd9f9ed6993e] Ack server push request, request = NotifySubscriberRequest, requestId = 2003
2024-11-15 18:29:29.056 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 18:29:29.056 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 18:29:29.057 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 18:29:29.057 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 18:29:29.246 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:29:29.246 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:29:29.279 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:29:29.288 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:29:29.288 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:29:29.339 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 18:29:29.339 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 18:29:29.346 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 18:29:29.346 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 18:29:29.348 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 18:29:29.348 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 18:29:29.349 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 18:29:29.350 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 18:29:29.350 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 18:29:29.350 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 18:29:29.350 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 18:29:29.350 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@6c0f3909[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 18:29:29.350 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731665972393_192.168.247.1_58082
2024-11-15 18:29:29.353 [nacos-grpc-client-executor-192.168.247.138-142] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731665972393_192.168.247.1_58082]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 18:29:29.360 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@ad7f146[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 143]
2024-11-15 18:29:29.360 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@1d4c8f70[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 191]
2024-11-15 18:29:29.360 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 18:29:29.361 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 18:29:29.362 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 18:29:29.363 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:29:29.365 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:29:29.383 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:29:29.492 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:29:29.496 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 18:29:29.497 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 18:29:29.497 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 18:29:29.504 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 18:29:32.682 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:29:32.756 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:29:33.275 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:29:33.287 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:29:33.288 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 18:29:34.001 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 18:29:34.004 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 18:29:34.031 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2024-11-15 18:29:34.265 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 18:29:34.297 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.298 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.300 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.531 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.595 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.598 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.602 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.603 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x000001caaf53aa58] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.605 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.612 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.613 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 18:29:34.899 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 18:29:34.911 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 18:29:34.911 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 18:29:35.027 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 18:29:35.028 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1723 ms
2024-11-15 18:29:35.125 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 18:29:35.469 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 18:29:35.729 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 18:29:36.230 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:29:36.230 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 18:29:36.395 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:29:36.439 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:29:36.459 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 18:29:36.801 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:29:36.802 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 18:29:36.865 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 18:29:36.865 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 18:29:37.870 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 18:29:37.877 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 18:29:37.877 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 18:29:37.877 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 18:29:37.878 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 18:29:37.911 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 18:29:37.911 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 18:29:37.912 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 18:29:37.917 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 18:29:37.917 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 18:29:37.921 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 18:29:37.931 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 59cd4a6b-3af8-4538-b5d7-de0261120fdf
2024-11-15 18:29:37.954 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 18:29:37.954 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 18:29:37.955 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 18:29:37.957 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 18:29:37.986 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 18:29:39.659 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731666580033_192.168.247.1_62536
2024-11-15 18:29:39.659 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Notify connected event to listeners.
2024-11-15 18:29:39.660 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 18:29:39.660 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 18:29:39.660 [main] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x000001caaf9ac150
2024-11-15 18:29:39.661 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 18:29:39.677 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 18:29:39.861 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.96 seconds (process running for 8.652)
2024-11-15 18:41:45.293 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 18:41:45.293 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 18:41:45.294 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 18:41:45.301 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 18:41:45.302 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 18:41:45.394 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1857370221199753220}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: collectNote =================================== 
2024-11-15 18:41:45.685 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 18:41:45.837 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1857370221199753220(Long)
2024-11-15 18:41:45.861 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 18:41:45.870 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 18:41:45.872 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857370221199753220(Long)
2024-11-15 18:41:45.877 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 18:41:45.889 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 18:41:45.889 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 18:41:45.927 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [收藏笔记], 耗时: 533ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 18:41:45.940 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 18:41:45.957 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 18:41:45.957 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 18:41:45.960 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C1C09DE0000, offsetMsgId=C0A8F78A00002A9F000000000001DC0F, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=5]
2024-11-15 18:41:45.965 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857370221199753220,"type":1,"createTime":"2024-11-15 18:41:45","noteCreatorId":109}, tags: Collect
2024-11-15 18:41:45.968 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_collection(user_id,note_id,create_time,status) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE create_time=?,status=?;
2024-11-15 18:41:45.970 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 18:41:45.970 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 18:41:45.981 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 18:41:45.981 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 18:41:46.073 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==> Parameters: 111(Long), 1857370221199753220(Long), 2024-11-15T18:41:45(LocalDateTime), 1(Integer), 2024-11-15T18:41:45(LocalDateTime), 1(Integer)
2024-11-15 18:41:46.083 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - <==    Updates: 1
2024-11-15 18:41:46.089 [NettyClientPublicExecutor_2] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C1C0A670001, offsetMsgId=C0A8F78A00002A9F000000000001DD9C, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=0], queueOffset=0]
2024-11-15 18:41:46.552 [nacos-grpc-client-executor-192.168.247.138-183] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Receive server push request, request = NotifySubscriberRequest, requestId = 2006
2024-11-15 18:41:46.552 [nacos-grpc-client-executor-192.168.247.138-183] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Ack server push request, request = NotifySubscriberRequest, requestId = 2006
2024-11-15 18:41:46.555 [nacos-grpc-client-executor-192.168.247.138-184] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Receive server push request, request = NotifySubscriberRequest, requestId = 2007
2024-11-15 18:41:46.555 [nacos-grpc-client-executor-192.168.247.138-184] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Ack server push request, request = NotifySubscriberRequest, requestId = 2007
2024-11-15 18:54:47.420 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 18:54:47.420 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 18:54:47.424 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1857370221199753220}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: collectNote =================================== 
2024-11-15 18:54:47.437 [http-nio-8086-exec-5] WARN  c.s.o.note.biz.exception.GlobalExceptionHandler - /note/collect request fail, errorCode: NOTE-20010, errorMessage: 您已经收藏过该笔记
2024-11-15 18:54:47.438 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:02:42.873 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:02:42.873 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:02:42.878 [http-nio-8086-exec-8] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消收藏笔记], 入参: {"id":1857370221199753220}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unCollectNote =================================== 
2024-11-15 19:02:42.887 [http-nio-8086-exec-8] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消收藏笔记], 耗时: 10ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:02:42.889 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:02:42.890 [NettyClientPublicExecutor_3] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C2F37C70002, offsetMsgId=C0A8F78A00002A9F000000000001E2B9, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=6]
2024-11-15 19:02:42.893 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_2] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857370221199753220,"type":0,"createTime":"2024-11-15 19:02:42","noteCreatorId":111}, tags: UnCollect
2024-11-15 19:02:42.905 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_2] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - ==>  Preparing: update t_note_collection set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 19:02:42.908 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_2] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T19:02:42(LocalDateTime), 111(Long), 1857370221199753220(Long)
2024-11-15 19:02:42.916 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_2] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - <==    Updates: 1
2024-11-15 19:02:42.920 [NettyClientPublicExecutor_4] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记取消收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C2F37E50003, offsetMsgId=C0A8F78A00002A9F000000000001E448, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=0], queueOffset=1]
2024-11-15 19:03:43.506 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:03:43.506 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:03:43.509 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1857370221199753220}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: collectNote =================================== 
2024-11-15 19:03:43.517 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectNoteIsCollected - ==>  Preparing: select count(1) from t_note_collection where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 19:03:43.530 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectNoteIsCollected - ==> Parameters: 111(Long), 1857370221199753220(Long)
2024-11-15 19:03:43.532 [http-nio-8086-exec-7] DEBUG c.s.o.n.b.d.m.N.selectNoteIsCollected - <==      Total: 1
2024-11-15 19:03:43.537 [http-nio-8086-exec-7] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [收藏笔记], 耗时: 28ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:03:43.538 [http-nio-8086-exec-7] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:03:43.540 [NettyClientPublicExecutor_5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C3024B10004, offsetMsgId=C0A8F78A00002A9F000000000001E71C, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=7]
2024-11-15 19:03:43.561 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_3] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857370221199753220,"type":1,"createTime":"2024-11-15 19:03:43","noteCreatorId":111}, tags: Collect
2024-11-15 19:03:43.562 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_3] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_collection(user_id,note_id,create_time,status) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE create_time=?,status=?;
2024-11-15 19:03:43.563 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_3] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==> Parameters: 111(Long), 1857370221199753220(Long), 2024-11-15T19:03:43(LocalDateTime), 1(Integer), 2024-11-15T19:03:43(LocalDateTime), 1(Integer)
2024-11-15 19:03:43.568 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_3] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - <==    Updates: 2
2024-11-15 19:03:43.572 [NettyClientPublicExecutor_6] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C3024D10005, offsetMsgId=C0A8F78A00002A9F000000000001E8A9, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=1]
2024-11-15 19:05:35.613 [http-nio-8086-exec-9] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:05:35.614 [http-nio-8086-exec-9] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:05:35.615 [http-nio-8086-exec-9] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消收藏笔记], 入参: {"id":1857370221199753220}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unCollectNote =================================== 
2024-11-15 19:05:35.620 [http-nio-8086-exec-9] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消收藏笔记], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:05:35.621 [http-nio-8086-exec-9] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:05:35.623 [NettyClientPublicExecutor_7] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C31DA840006, offsetMsgId=C0A8F78A00002A9F000000000001EB7C, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=8]
2024-11-15 19:05:35.626 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_4] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857370221199753220,"type":0,"createTime":"2024-11-15 19:05:35","noteCreatorId":111}, tags: UnCollect
2024-11-15 19:05:35.628 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_4] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - ==>  Preparing: update t_note_collection set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 19:05:35.628 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_4] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T19:05:35(LocalDateTime), 111(Long), 1857370221199753220(Long)
2024-11-15 19:05:35.633 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_4] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - <==    Updates: 1
2024-11-15 19:05:35.637 [NettyClientPublicExecutor_8] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记取消收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C31DA920007, offsetMsgId=C0A8F78A00002A9F000000000001ED0B, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=3], queueOffset=1]
2024-11-15 19:21:15.835 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 109
2024-11-15 19:21:15.836 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 109
2024-11-15 19:21:15.845 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记发布], 入参: {"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"11111对齐对齐测试测试测试标题22222","content":"111111对齐对齐测试测试内容","topicId":1}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: publishNote =================================== 
2024-11-15 19:21:15.849 [http-nio-8086-exec-1] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 19:21:15.880 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-distributed-id-generator, group:DEFAULT_GROUP, clusters: 
2024-11-15 19:21:15.885 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-distributed-id-generator -> [{"ip":"192.168.17.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 19:21:15.885 [http-nio-8086-exec-1] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-distributed-id-generator -> [{"ip":"192.168.17.1","port":8085,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-distributed-id-generator","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatTimeOut":15000,"instanceHeartBeatInterval":5000}]
2024-11-15 19:21:15.920 [http-nio-8086-exec-1] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 19:21:15.987 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==>  Preparing: select name from t_topic where id = ?
2024-11-15 19:21:15.988 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==> Parameters: 1(Long)
2024-11-15 19:21:15.990 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - <==      Total: 0
2024-11-15 19:21:15.991 [http-nio-8086-exec-1] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - ==>  Preparing: insert into t_note (id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2024-11-15 19:21:15.995 [http-nio-8086-exec-1] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - ==> Parameters: 1857383358787485722(Long), 11111对齐对齐测试测试测试标题22222(String), false(Boolean), 109(Long), 1(Long), null, false(Boolean), 1(Integer), null, http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg(String), 0(Integer), 2024-11-15T19:21:15.991175400(LocalDateTime), 2024-11-15T19:21:15.991175400(LocalDateTime), 1(Integer), 4080cc57-091c-4444-a6c2-aa3b7b1aeb3d(String)
2024-11-15 19:21:16.005 [http-nio-8086-exec-1] DEBUG c.s.o.note.biz.domain.mapper.NoteDOMapper.insert - <==    Updates: 1
2024-11-15 19:21:16.006 [http-nio-8086-exec-1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 笔记存储成功:NoteDO(id=1857383358787485722, title=11111对齐对齐测试测试测试标题22222, isContentEmpty=false, creatorId=109, topicId=1, topicName=null, isTop=false, type=1, imgUris=null, videoUri=http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg, visible=0, createTime=2024-11-15T19:21:15.991175400, updateTime=2024-11-15T19:21:15.991175400, status=1, contentUuid=4080cc57-091c-4444-a6c2-aa3b7b1aeb3d)
2024-11-15 19:21:16.020 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记发布], 耗时: 176ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:21:16.021 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 109
2024-11-15 19:21:16.024 [NettyClientPublicExecutor_9] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记发布】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C4033F60008, offsetMsgId=C0A8F78A00002A9F000000000001EFDF, messageQueue=MessageQueue [topic=NoteOperateTopic, brokerName=192.168.247.138, queueId=0], queueOffset=1]
2024-11-15 19:21:16.454 [nacos-grpc-client-executor-192.168.247.138-665] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Receive server push request, request = NotifySubscriberRequest, requestId = 2008
2024-11-15 19:21:16.455 [nacos-grpc-client-executor-192.168.247.138-665] INFO  com.alibaba.nacos.common.remote.client - [59cd4a6b-3af8-4538-b5d7-de0261120fdf] Ack server push request, request = NotifySubscriberRequest, requestId = 2008
2024-11-15 19:21:58.868 [http-nio-8086-exec-2] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:21:58.868 [http-nio-8086-exec-2] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:21:58.871 [http-nio-8086-exec-2] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1857383358787485722}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: collectNote =================================== 
2024-11-15 19:21:58.872 [http-nio-8086-exec-2] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 19:21:58.873 [http-nio-8086-exec-2] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:21:58.875 [http-nio-8086-exec-2] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 19:21:58.877 [NoteExecutor-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 19:21:58.878 [NoteExecutor-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:21:58.880 [NoteExecutor-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 19:21:58.880 [http-nio-8086-exec-2] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [收藏笔记], 耗时: 10ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:21:58.881 [http-nio-8086-exec-2] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:21:58.881 [NoteExecutor-6] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 19:21:58.881 [NoteExecutor-7] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 19:21:58.883 [NettyClientPublicExecutor_10] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C40DB610009, offsetMsgId=C0A8F78A00002A9F000000000001F137, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=9]
2024-11-15 19:21:58.887 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_5] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857383358787485722,"type":1,"createTime":"2024-11-15 19:21:58","noteCreatorId":109}, tags: Collect
2024-11-15 19:21:58.888 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_5] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_collection(user_id,note_id,create_time,status) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE create_time=?,status=?;
2024-11-15 19:21:58.889 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_5] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==> Parameters: 111(Long), 1857383358787485722(Long), 2024-11-15T19:21:58(LocalDateTime), 1(Integer), 2024-11-15T19:21:58(LocalDateTime), 1(Integer)
2024-11-15 19:21:58.895 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_5] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - <==    Updates: 1
2024-11-15 19:21:58.898 [NettyClientPublicExecutor_11] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C40DB6F000A, offsetMsgId=C0A8F78A00002A9F000000000001F2C4, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=0], queueOffset=2]
2024-11-15 19:23:44.224 [http-nio-8086-exec-4] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:23:44.225 [http-nio-8086-exec-4] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:23:44.227 [http-nio-8086-exec-4] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [取消收藏笔记], 入参: {"id":1857383358787485722}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: unCollectNote =================================== 
2024-11-15 19:23:44.232 [http-nio-8086-exec-4] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [取消收藏笔记], 耗时: 5ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:23:44.233 [http-nio-8086-exec-4] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:23:44.237 [NettyClientPublicExecutor_12] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记取消收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C4276E8000B, offsetMsgId=C0A8F78A00002A9F000000000001F597, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=10]
2024-11-15 19:23:44.237 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_6] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857383358787485722,"type":0,"createTime":"2024-11-15 19:23:44","noteCreatorId":111}, tags: UnCollect
2024-11-15 19:23:44.239 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_6] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - ==>  Preparing: update t_note_collection set status = ?, create_time = ? where user_id = ? and note_id = ? and status = 1
2024-11-15 19:23:44.239 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_6] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - ==> Parameters: 0(Integer), 2024-11-15T19:23:44(LocalDateTime), 111(Long), 1857383358787485722(Long)
2024-11-15 19:23:44.244 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_6] DEBUG c.s.o.n.b.d.m.N.update2UnCollectByUserIdAndNoteId - <==    Updates: 1
2024-11-15 19:23:44.247 [NettyClientPublicExecutor_1] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记取消收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F0000014BEC63947C6B4C4276F4000C, offsetMsgId=C0A8F78A00002A9F000000000001F726, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=2]
2024-11-15 19:39:15.845 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 19:39:15.845 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 19:39:15.846 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 19:39:15.847 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 19:39:15.868 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 19:39:15.869 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 19:39:16.039 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 19:39:16.039 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 19:39:16.079 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 19:39:16.080 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 19:39:16.206 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2024-11-15 19:39:16.207 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - [DEREGISTER-SERVICE] xiaochengshu deregistering service xiaochengshu-note with instance: Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={}}
2024-11-15 19:39:16.211 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2024-11-15 19:39:16.212 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown begin
2024-11-15 19:39:16.212 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown begin
2024-11-15 19:39:16.212 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.backups.FailoverReactor do shutdown stop
2024-11-15 19:39:16.212 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.cache.ServiceInfoHolder do shutdown stop
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown begin
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown begin
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServiceInfoUpdateService do shutdown stop
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown begin
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.core.ServerListManager do shutdown stop
2024-11-15 19:39:16.213 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown begin
2024-11-15 19:39:16.214 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Start destroying NacosRestTemplate
2024-11-15 19:39:16.214 [SpringApplicationShutdownHook] WARN  com.alibaba.nacos.client.naming - [NamingHttpClientManager] Destruction of the end
2024-11-15 19:39:16.214 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.http.NamingHttpClientProxy do shutdown stop
2024-11-15 19:39:16.214 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown rpc client, set status to shutdown
2024-11-15 19:39:16.214 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Shutdown client event executor java.util.concurrent.ScheduledThreadPoolExecutor@4c647e55[Running, pool size = 2, active threads = 2, queued tasks = 0, completed tasks = 0]
2024-11-15 19:39:16.214 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.common.remote.client - Close current connection 1731666580033_192.168.247.1_62536
2024-11-15 19:39:16.217 [nacos-grpc-client-executor-192.168.247.138-883] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731666580033_192.168.247.1_62536]Ignore complete event,isRunning:false,isAbandon=false
2024-11-15 19:39:16.222 [SpringApplicationShutdownHook] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - Shutdown grpc executor java.util.concurrent.ThreadPoolExecutor@476dd47b[Running, pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 884]
2024-11-15 19:39:16.223 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - Shutdown grpc redo service executor java.util.concurrent.ScheduledThreadPoolExecutor@3368c3c6[Running, pool size = 1, active threads = 0, queued tasks = 1, completed tasks = 1392]
2024-11-15 19:39:16.223 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - [null] CredentialWatcher is stopped
2024-11-15 19:39:16.223 [SpringApplicationShutdownHook] INFO  c.a.n.client.auth.ram.identify.CredentialService - [null] CredentialService is freed
2024-11-15 19:39:16.223 [SpringApplicationShutdownHook] INFO  com.alibaba.nacos.client.naming - com.alibaba.nacos.client.naming.remote.NamingClientProxyDelegate do shutdown stop
2024-11-15 19:39:16.224 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 19:39:16.224 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 19:39:16.347 [SpringApplicationShutdownHook] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 19:39:16.351 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 19:39:16.352 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 19:39:16.352 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closing ...
2024-11-15 19:39:16.355 [SpringApplicationShutdownHook] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} closed
2024-11-15 19:39:21.560 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 19:39:21.634 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 19:39:22.201 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 19:39:22.217 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 19:39:22.217 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - The following 1 profile is active: "dev"
2024-11-15 19:39:22.869 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2024-11-15 19:39:22.872 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2024-11-15 19:39:22.893 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2024-11-15 19:39:23.116 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=b27f3fa5-901e-3e9e-a506-ecb0721bab08
2024-11-15 19:39:23.146 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.148 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.149 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.swc.orangeBook.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.370 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.435 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.437 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.441 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.441 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$723/0x000002968753b7e0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.443 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.449 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.450 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-11-15 19:39:23.721 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2024-11-15 19:39:23.732 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2024-11-15 19:39:23.732 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2024-11-15 19:39:23.858 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2024-11-15 19:39:23.858 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1620 ms
2024-11-15 19:39:23.949 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2024-11-15 19:39:24.250 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2024-11-15 19:39:24.493 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaochengshu_group) init on namesrv 192.168.247.138:9876
2024-11-15 19:39:24.923 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_CollectUnCollectTopic', namespace='', nameServer='192.168.247.138:9876', topic='CollectUnCollectTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 19:39:24.923 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:collectUnCollectNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2024-11-15 19:39:25.067 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 19:39:25.111 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-kv' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 19:39:25.132 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaochengshu-user' URL not provided. Will try picking an instance via load-balancing.
2024-11-15 19:39:25.474 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_DeleteNoteLocalCacheTopic', namespace='', nameServer='192.168.247.138:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 19:39:25.475 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2024-11-15 19:39:25.537 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaochengshu_group_LikeUnlikeTopic', namespace='', nameServer='192.168.247.138:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2024-11-15 19:39:25.537 [main] INFO  o.a.r.s.a.ListenerContainerConfiguration - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2024-11-15 19:39:26.602 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2024-11-15 19:39:26.609 [main] WARN  com.alibaba.nacos.client.logging.NacosLogging - Load Logback Configuration of Nacos fail, message: Could not initialize Logback Nacos logging from classpath:nacos-logback.xml
2024-11-15 19:39:26.609 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ans.namespace attribute : null
2024-11-15 19:39:26.609 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from ALIBABA_ALIWARE_NAMESPACE attribute :null
2024-11-15 19:39:26.610 [main] INFO  com.alibaba.nacos.client.naming - initializer namespace from namespace attribute :null
2024-11-15 19:39:26.636 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [req-serv] nacos-server port:8848
2024-11-15 19:39:26.636 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - [settings] [http-client] connect timeout:1000
2024-11-15 19:39:26.637 [main] INFO  com.alibaba.nacos.client.utils.ParamUtil - PER_TASK_CONFIG_SIZE: 3000.0
2024-11-15 19:39:26.642 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2024-11-15 19:39:26.642 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2024-11-15 19:39:26.645 [main] INFO  c.a.n.client.auth.ram.identify.CredentialWatcher - null No credential found
2024-11-15 19:39:26.658 [main] INFO  com.alibaba.nacos.common.remote.client - [RpcClientFactory] create a new rpc client of 540a5a5c-5ff8-470f-bd95-1519472b4ce8
2024-11-15 19:39:26.681 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] RpcClient init, ServerListFactory = com.alibaba.nacos.client.naming.core.ServerListManager
2024-11-15 19:39:26.681 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Registry connection listener to current client:com.alibaba.nacos.client.naming.remote.gprc.redo.NamingGrpcRedoService
2024-11-15 19:39:26.682 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Register server push request handler:com.alibaba.nacos.client.naming.remote.gprc.NamingPushRequestHandler
2024-11-15 19:39:26.687 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Try to connect to server on start up, server: {serverIp = '192.168.247.138', server main port = 8848}
2024-11-15 19:39:26.715 [main] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 19:39:27.663 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Success to connect to server [192.168.247.138:8848] on start up, connectionId = 1731670768075_192.168.247.1_64223
2024-11-15 19:39:27.663 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Notify connected event to listeners.
2024-11-15 19:39:27.664 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.client.naming - Grpc connection connect
2024-11-15 19:39:27.664 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$ConnectResetRequestHandler
2024-11-15 19:39:27.664 [main] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Register server push request handler:com.alibaba.nacos.common.remote.client.RpcClient$$Lambda$1283/0x00000296879ac810
2024-11-15 19:39:27.665 [main] INFO  com.alibaba.nacos.client.naming - [REGISTER-SERVICE] xiaochengshu registering service xiaochengshu-note with instance Instance{instanceId='null', ip='192.168.17.1', port=8086, weight=1.0, healthy=true, enabled=true, ephemeral=true, clusterName='DEFAULT', serviceName='null', metadata={IPv6=null, preserved.register.source=SPRING_CLOUD}}
2024-11-15 19:39:27.679 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaochengshu-note 192.168.17.1:8086 register finished
2024-11-15 19:39:27.862 [main] INFO  c.s.o.note.biz.OrangeBookNoteBizApplication - Started OrangeBookNoteBizApplication in 7.111 seconds (process running for 7.81)
2024-11-15 19:43:03.808 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2024-11-15 19:43:03.808 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2024-11-15 19:43:03.809 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2024-11-15 19:43:03.815 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:43:03.816 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:43:03.904 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857282961905287197}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 19:43:04.180 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 19:43:04.323 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1857282961905287197(Long)
2024-11-15 19:43:04.343 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 19:43:04.347 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 19:43:04.349 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857282961905287197(Long)
2024-11-15 19:43:04.354 [NoteExecutor-1] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 19:43:04.365 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 19:43:04.365 [NoteExecutor-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 19:43:04.394 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 19:43:04.397 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 111(Long), 1857282961905287197(Long)
2024-11-15 19:43:04.402 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 19:43:04.407 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 19:43:04.408 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 111(Long)
2024-11-15 19:43:04.409 [http-nio-8086-exec-1] WARN  c.s.o.note.biz.exception.GlobalExceptionHandler - /note/like request fail, errorCode: NOTE-20008, errorMessage: 您已经点赞过该笔记
2024-11-15 19:43:04.410 [NoteExecutor-4] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 1
2024-11-15 19:43:04.426 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:43:04.443 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-user, group:DEFAULT_GROUP, clusters: 
2024-11-15 19:43:04.443 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - [SUBSCRIBE-SERVICE] service:xiaochengshu-kv, group:DEFAULT_GROUP, clusters: 
2024-11-15 19:43:04.458 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 19:43:04.458 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - init new ips(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 19:43:04.468 [NoteExecutor-3] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-kv -> [{"ip":"192.168.17.1","port":8084,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-kv","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 19:43:04.468 [NoteExecutor-2] INFO  com.alibaba.nacos.client.naming - current ips:(1) service: DEFAULT_GROUP@@xiaochengshu-user -> [{"ip":"192.168.17.1","port":8082,"weight":1.0,"healthy":true,"enabled":true,"ephemeral":true,"clusterName":"DEFAULT","serviceName":"DEFAULT_GROUP@@xiaochengshu-user","metadata":{"preserved.register.source":"SPRING_CLOUD"},"ipDeleteTimeout":30000,"instanceHeartBeatInterval":5000,"instanceHeartBeatTimeOut":15000}]
2024-11-15 19:43:05.010 [nacos-grpc-client-executor-192.168.247.138-66] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Receive server push request, request = NotifySubscriberRequest, requestId = 2011
2024-11-15 19:43:05.010 [nacos-grpc-client-executor-192.168.247.138-66] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Ack server push request, request = NotifySubscriberRequest, requestId = 2011
2024-11-15 19:43:05.012 [nacos-grpc-client-executor-192.168.247.138-67] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Receive server push request, request = NotifySubscriberRequest, requestId = 2012
2024-11-15 19:43:05.012 [nacos-grpc-client-executor-192.168.247.138-67] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Ack server push request, request = NotifySubscriberRequest, requestId = 2012
2024-11-15 19:47:10.605 [http-nio-8086-exec-6] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 109
2024-11-15 19:47:10.605 [http-nio-8086-exec-6] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 109
2024-11-15 19:47:10.614 [http-nio-8086-exec-6] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记修改], 入参: {"id":1857383358787485722,"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"对齐更新图文笔记测试标题更新过呢更新","content":"对齐更新图文笔记测试内容更新更新","topicId":1}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: updateNote =================================== 
2024-11-15 19:47:10.623 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 19:47:10.624 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:47:10.627 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 19:47:10.628 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==>  Preparing: select name from t_topic where id = ?
2024-11-15 19:47:10.628 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==> Parameters: 1(Long)
2024-11-15 19:47:10.630 [http-nio-8086-exec-6] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - <==      Total: 0
2024-11-15 19:47:10.632 [http-nio-8086-exec-6] WARN  c.s.o.note.biz.exception.GlobalExceptionHandler - /note/update request fail, errorCode: NOTE-20005, errorMessage: 话题不存在
2024-11-15 19:47:10.633 [http-nio-8086-exec-6] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 109
2024-11-15 19:51:29.173 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 109
2024-11-15 19:51:29.173 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 109
2024-11-15 19:51:29.174 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记修改], 入参: {"id":1857383358787485722,"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"对齐更新图文笔记测试标题更新过呢更新","content":"对齐更新图文笔记测试内容更新更新","topicId":1}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: updateNote =================================== 
2024-11-15 19:51:29.176 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 19:51:29.177 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:51:29.179 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 19:51:29.180 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==>  Preparing: select name from t_topic where id = ?
2024-11-15 19:51:29.180 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==> Parameters: 1(Long)
2024-11-15 19:51:29.183 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - <==      Total: 1
2024-11-15 19:51:29.184 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.updateByPrimaryKey - ==>  Preparing: update t_note set title = ?, is_content_empty = ?, topic_id = ?, topic_name = ?, `type` = ?, img_uris = ?, video_uri = ?, update_time = ? where id = ?
2024-11-15 19:51:29.187 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.updateByPrimaryKey - ==> Parameters: 对齐更新图文笔记测试标题更新过呢更新(String), false(Boolean), 1(Long), 电影(String), 1(Integer), null, http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg(String), 2024-11-15T19:51:29.184514200(LocalDateTime), 1857383358787485722(Long)
2024-11-15 19:51:29.195 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.updateByPrimaryKey - <==    Updates: 1
2024-11-15 19:51:29.239 [http-nio-8086-exec-5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ====> MQ：删除笔记本地缓存消息发送成功...
2024-11-15 19:51:29.239 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 19:51:29.240 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:51:29.242 [http-nio-8086-exec-5] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 19:51:29.245 [http-nio-8086-exec-5] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 19:51:29.271 [http-nio-8086-exec-5] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记修改], 耗时: 97ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:51:29.275 [http-nio-8086-exec-5] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 109
2024-11-15 19:52:08.491 [http-nio-8086-exec-10] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:52:08.491 [http-nio-8086-exec-10] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:52:08.494 [http-nio-8086-exec-10] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857383358787485722}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 19:52:08.496 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 19:52:08.497 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:52:08.499 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 19:52:08.501 [NoteExecutor-6] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 19:52:08.502 [NoteExecutor-6] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857383358787485722(Long)
2024-11-15 19:52:08.502 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 19:52:08.503 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 111(Long), 1857383358787485722(Long)
2024-11-15 19:52:08.504 [NoteExecutor-6] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 19:52:08.504 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 19:52:08.505 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2024-11-15 19:52:08.505 [NoteExecutor-7] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 19:52:08.505 [NoteExecutor-8] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 19:52:08.505 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 111(Long)
2024-11-15 19:52:08.507 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 0
2024-11-15 19:52:08.516 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==>  Preparing: select note_id, create_time from t_note_like where user_id = ? and status = 1 order by create_time desc limit ?
2024-11-15 19:52:08.520 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==> Parameters: 111(Long), 100(Integer)
2024-11-15 19:52:08.522 [http-nio-8086-exec-10] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - <==      Total: 0
2024-11-15 19:52:08.526 [http-nio-8086-exec-10] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 32ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:52:08.527 [http-nio-8086-exec-10] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:52:08.534 [NettyClientPublicExecutor_1] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001731C63947C6B4C5C78510001, offsetMsgId=C0A8F78A00002A9F00000000000212FE, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=10]
2024-11-15 19:52:08.539 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1857383358787485722,"type":1,"createTime":"2024-11-15 19:52:08","noteCreatorId":109}, tags: Like
2024-11-15 19:52:08.544 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 19:52:08.636 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 111(Long), 1857383358787485722(Long), 2024-11-15T19:52:08(LocalDateTime), 1(Integer), 2024-11-15T19:52:08(LocalDateTime), 1(Integer)
2024-11-15 19:52:08.642 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_1] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 1
2024-11-15 19:52:08.659 [NettyClientPublicExecutor_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001731C63947C6B4C5C78CC0002, offsetMsgId=C0A8F78A00002A9F0000000000021482, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=4]
2024-11-15 19:58:00.830 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 19:58:00.830 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 19:58:00.835 [http-nio-8086-exec-8] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [收藏笔记], 入参: {"id":1857383358787485722}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: collectNote =================================== 
2024-11-15 19:58:00.841 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_collection where user_id = ? and note_id = ? and status = 1 limit 1
2024-11-15 19:58:00.842 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 111(Long), 1857383358787485722(Long)
2024-11-15 19:58:00.846 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2024-11-15 19:58:00.846 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectByUserId - ==>  Preparing: select note_id from t_note_collection where user_id = ? and status = 1
2024-11-15 19:58:00.847 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectByUserId - ==> Parameters: 111(Long)
2024-11-15 19:58:00.849 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectByUserId - <==      Total: 0
2024-11-15 19:58:00.855 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectCollectedByUserIdAndLimit - ==>  Preparing: select note_id, create_time from t_note_collection where user_id = ? and status = 1 order by create_time desc limit ?
2024-11-15 19:58:00.856 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectCollectedByUserIdAndLimit - ==> Parameters: 111(Long), 300(Integer)
2024-11-15 19:58:00.858 [http-nio-8086-exec-8] DEBUG c.s.o.n.b.d.m.N.selectCollectedByUserIdAndLimit - <==      Total: 0
2024-11-15 19:58:00.862 [http-nio-8086-exec-8] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [收藏笔记], 耗时: 28ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 19:58:00.864 [http-nio-8086-exec-8] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 19:58:00.865 [NettyClientPublicExecutor_3] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001731C63947C6B4C61D89F0003, offsetMsgId=C0A8F78A00002A9F00000000000283AF, messageQueue=MessageQueue [topic=CollectUnCollectTopic, brokerName=192.168.247.138, queueId=1], queueOffset=11]
2024-11-15 19:58:00.868 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> CollectUnCollectNoteConsumer 消费了消息 {"userId":111,"noteId":1857383358787485722,"type":1,"createTime":"2024-11-15 19:58:00","noteCreatorId":109}, tags: Collect
2024-11-15 19:58:00.869 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_collection(user_id,note_id,create_time,status) VALUES (?,?,?,?) ON DUPLICATE KEY UPDATE create_time=?,status=?;
2024-11-15 19:58:00.870 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - ==> Parameters: 111(Long), 1857383358787485722(Long), 2024-11-15T19:58(LocalDateTime), 1(Integer), 2024-11-15T19:58(LocalDateTime), 1(Integer)
2024-11-15 19:58:00.874 [ConsumeMessageThread_xiaochengshu_group_CollectUnCollectTopic_1] DEBUG c.s.o.n.b.d.m.N.insertOrUpdate - <==    Updates: 2
2024-11-15 19:58:00.879 [NettyClientPublicExecutor_4] INFO  c.s.o.n.biz.consumer.CollectUnCollectNoteConsumer - ==> 【计数: 笔记收藏】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001731C63947C6B4C61D8AD0004, offsetMsgId=C0A8F78A00002A9F000000000002853C, messageQueue=MessageQueue [topic=CountNoteCollectTopic, brokerName=192.168.247.138, queueId=2], queueOffset=0]
2024-11-15 20:00:36.299 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 109
2024-11-15 20:00:36.299 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 109
2024-11-15 20:00:36.301 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [笔记修改], 入参: {"id":1857370221199753220,"type":1,"imgUris":null,"videoUri":"http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg","title":"1234对齐更新图文笔记测试标题更新过呢更新","content":"12334对齐更新图文笔记测试内容更新更新","topicId":1}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: updateNote =================================== 
2024-11-15 20:00:36.303 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 20:00:36.304 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857370221199753220(Long)
2024-11-15 20:00:36.306 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 20:00:36.306 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==>  Preparing: select name from t_topic where id = ?
2024-11-15 20:00:36.307 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - ==> Parameters: 1(Long)
2024-11-15 20:00:36.313 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.m.TopicDOMapper.selectNameByPrimaryKey - <==      Total: 1
2024-11-15 20:00:36.313 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.updateByPrimaryKey - ==>  Preparing: update t_note set title = ?, is_content_empty = ?, topic_id = ?, topic_name = ?, `type` = ?, img_uris = ?, video_uri = ?, update_time = ? where id = ?
2024-11-15 20:00:36.313 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.updateByPrimaryKey - ==> Parameters: 1234对齐更新图文笔记测试标题更新过呢更新(String), false(Boolean), 1(Long), 电影(String), 1(Integer), null, http://116.62.199.48:9000/weblog/c89cc6b66f0341c0b7854771ae063eac.jpg(String), 2024-11-15T20:00:36.313202300(LocalDateTime), 1857370221199753220(Long)
2024-11-15 20:00:36.316 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.updateByPrimaryKey - <==    Updates: 1
2024-11-15 20:00:36.319 [http-nio-8086-exec-3] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ====> MQ：删除笔记本地缓存消息发送成功...
2024-11-15 20:00:36.320 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 20:00:36.320 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857370221199753220(Long)
2024-11-15 20:00:36.322 [http-nio-8086-exec-3] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 20:00:36.323 [http-nio-8086-exec-3] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 109
2024-11-15 20:00:36.339 [http-nio-8086-exec-3] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [笔记修改], 耗时: 39ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 20:00:36.340 [http-nio-8086-exec-3] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 109
2024-11-15 20:01:00.477 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ## HeaderUserId2ContextFilter, 用户 ID: 111
2024-11-15 20:01:00.477 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 111
2024-11-15 20:01:00.479 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1857370221199753220}, 请求类: com.swc.orangeBook.note.biz.controller.NoteController, 请求方法: likeNote =================================== 
2024-11-15 20:01:00.481 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==>  Preparing: select creator_id from t_note where id = ? and status = 1
2024-11-15 20:01:00.481 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - ==> Parameters: 1857370221199753220(Long)
2024-11-15 20:01:00.483 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.NoteDOMapper.selectCreatorIdByNoteId - <==      Total: 1
2024-11-15 20:01:00.485 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==>  Preparing: select id, title, is_content_empty, creator_id, topic_id, topic_name, is_top, `type`, img_uris, video_uri, visible, create_time, update_time, `status`, content_uuid from t_note where id = ? and status=1
2024-11-15 20:01:00.485 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - ==> Parameters: 1857370221199753220(Long)
2024-11-15 20:01:00.489 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==>  Preparing: select note_id, create_time from t_note_like where user_id = ? and status = 1 order by create_time desc limit ?
2024-11-15 20:01:00.489 [NoteExecutor-10] DEBUG c.s.o.n.b.d.mapper.NoteDOMapper.selectByPrimaryKey - <==      Total: 1
2024-11-15 20:01:00.490 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - ==> Parameters: 111(Long), 100(Integer)
2024-11-15 20:01:00.490 [NoteExecutor-2] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 20:01:00.490 [NoteExecutor-4] INFO  c.s.f.b.c.interceptor.FeignRequestInterceptor - ########## feign 请求设置请求头 userId: 111
2024-11-15 20:01:00.493 [http-nio-8086-exec-1] DEBUG c.s.o.n.b.d.m.N.selectLikedByUserIdAndLimit - <==      Total: 1
2024-11-15 20:01:00.500 [http-nio-8086-exec-1] INFO  c.s.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 21ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2024-11-15 20:01:00.501 [http-nio-8086-exec-1] INFO  c.s.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 111
2024-11-15 20:01:00.503 [NettyClientPublicExecutor_5] INFO  c.s.o.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001731C63947C6B4C6496540006, offsetMsgId=C0A8F78A00002A9F000000000002C0FB, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=11]
2024-11-15 20:01:00.505 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":111,"noteId":1857370221199753220,"type":1,"createTime":"2024-11-15 20:01:00","noteCreatorId":109}, tags: Like
2024-11-15 20:01:00.506 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2024-11-15 20:01:00.507 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 111(Long), 1857370221199753220(Long), 2024-11-15T20:01(LocalDateTime), 1(Integer), 2024-11-15T20:01(LocalDateTime), 1(Integer)
2024-11-15 20:01:00.520 [ConsumeMessageThread_xiaochengshu_group_LikeUnlikeTopic_2] DEBUG c.s.o.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 1
2024-11-15 20:01:00.524 [NettyClientPublicExecutor_6] INFO  c.s.o.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=7F000001731C63947C6B4C6496690007, offsetMsgId=C0A8F78A00002A9F000000000002C27F, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=192.168.247.138, queueId=1], queueOffset=5]
2024-11-15 20:16:26.776 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:26.776 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:27.529 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:27.529 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:27.699 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 20:16:27.783 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 20:16:28.478 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 20:16:28.539 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:9876] result: true
2024-11-15 20:16:29.780 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:30.700 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:31.480 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:35.266 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Server healthy check fail, currentConnection = 1731670768075_192.168.247.1_64223
2024-11-15 20:16:35.266 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Try to reconnect to a new server, server is  not appointed, will choose a random server.
2024-11-15 20:16:35.267 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 20:16:35.850 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2024-11-15 20:16:35.850 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2024-11-15 20:16:35.850 [Thread-11] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2024-11-15 20:16:35.851 [Thread-14] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2024-11-15 20:16:36.535 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
2024-11-15 20:16:38.271 [com.alibaba.nacos.client.remote.worker] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.247.138 ,port 9848 is available , error ={}
java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 1 milliseconds, 787900 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@7712aaf9[status=PENDING, info=[GrpcFuture{clientCall=PendingCall{realCall=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@38c85794, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@7898a588, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@678b9ed0}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.reconnect(RpcClient.java:502)
	at com.alibaba.nacos.common.remote.client.RpcClient.lambda$start$2(RpcClient.java:343)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-11-15 20:16:38.381 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 20:16:41.384 [com.alibaba.nacos.client.remote.worker] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.247.138 ,port 9848 is available , error ={}
java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 1 milliseconds, 169700 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@57730a6e[status=PENDING, info=[GrpcFuture{clientCall=PendingCall{realCall=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@38c85794, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@7898a588, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@678b9ed0}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.reconnect(RpcClient.java:502)
	at com.alibaba.nacos.common.remote.client.RpcClient.lambda$start$2(RpcClient.java:343)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-11-15 20:16:41.384 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Fail to connect server, after trying 1 times, last try server is {serverIp = '192.168.247.138', server main port = 8848}, error = unknown
2024-11-15 20:16:41.586 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 20:16:42.370 [nacos-grpc-client-executor-192.168.247.138-480] WARN  c.a.nacos.common.remote.client.grpc.GrpcClient - [1731670768075_192.168.247.1_64223]Ignore error event,isRunning:false,isAbandon=false
2024-11-15 20:16:44.589 [com.alibaba.nacos.client.remote.worker] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.247.138 ,port 9848 is available , error ={}
java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 1 milliseconds, 490600 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@32027c8c[status=PENDING, info=[GrpcFuture{clientCall=PendingCall{realCall=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@38c85794, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@7898a588, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@678b9ed0}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.reconnect(RpcClient.java:502)
	at com.alibaba.nacos.common.remote.client.RpcClient.lambda$start$2(RpcClient.java:343)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-11-15 20:16:44.589 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Fail to connect server, after trying 2 times, last try server is {serverIp = '192.168.247.138', server main port = 8848}, error = unknown
2024-11-15 20:16:44.891 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 20:16:47.893 [com.alibaba.nacos.client.remote.worker] ERROR c.a.nacos.common.remote.client.grpc.GrpcClient - Server check fail, please check server 192.168.247.138 ,port 9848 is available , error ={}
java.util.concurrent.TimeoutException: Waited 3000 milliseconds (plus 226000 nanoseconds delay) for com.alibaba.nacos.shaded.io.grpc.stub.ClientCalls$GrpcFuture@cfb2a0c[status=PENDING, info=[GrpcFuture{clientCall=PendingCall{realCall=ClientCallImpl{method=MethodDescriptor{fullMethodName=Request/request, type=UNARY, idempotent=false, safe=false, sampledToLocalTracing=true, requestMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@38c85794, responseMarshaller=com.alibaba.nacos.shaded.io.grpc.protobuf.lite.ProtoLiteUtils$MessageMarshaller@7898a588, schemaDescriptor=com.alibaba.nacos.api.grpc.auto.RequestGrpc$RequestMethodDescriptorSupplier@678b9ed0}}}}]]
	at com.alibaba.nacos.shaded.com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:508)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.serverCheck(GrpcClient.java:218)
	at com.alibaba.nacos.common.remote.client.grpc.GrpcClient.connectToServer(GrpcClient.java:329)
	at com.alibaba.nacos.common.remote.client.RpcClient.reconnect(RpcClient.java:502)
	at com.alibaba.nacos.common.remote.client.RpcClient.lambda$start$2(RpcClient.java:343)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:842)
2024-11-15 20:16:47.893 [com.alibaba.nacos.client.remote.worker] INFO  com.alibaba.nacos.common.remote.client - [540a5a5c-5ff8-470f-bd95-1519472b4ce8] Fail to connect server, after trying 3 times, last try server is {serverIp = '192.168.247.138', server main port = 8848}, error = unknown
2024-11-15 20:16:48.295 [com.alibaba.nacos.client.remote.worker] INFO  c.a.nacos.common.remote.client.grpc.GrpcClient - grpc client connection server:192.168.247.138 ip,serverPort:9848,grpcTslConfig:{"sslProvider":"OPENSSL","enableTls":false,"mutualAuthEnable":false,"trustAll":false}
2024-11-15 20:16:48.543 [NettyClientSelector_1] INFO  RocketmqRemoting - closeChannel: close the connection to remote address[192.168.247.138:10911] result: true
